# -*- mode: org; coding: utf-8-unix; indent-tabs-mode: nil -*-
# auto-complete.org
#
# Copyright(C) Youhei SASAKI All rights reserved.
# $Lastupdate: 2012/03/15 15:14:16$
#
# Author: Youhei SASAKI <uwabami@gfd-dennou.org>
# License: Expat
#
# Permission is hereby granted, free of charge, to any person obtaining
# a copy of this software and associated documentation files (the
# "Software"), to deal in the Software without restriction, including
# without limitation the rights to use, copy, modify, merge, publish,
# distribute, sublicense, and/or sell copies of the Software, and to
# permit persons to whom the Software is furnished to do so, subject to
# the following conditions:
#
# The above copyright notice and this permission notice shall be
# included in all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
#
#+SETUPFILE: ~/.emacs.d/template/org/level-2.org
#+INCLUDE: ~/.emacs.d/template/org/menu-level-2.org
#+TITLE: auto-complete の設定

* 読み込み
   Debian パッケージがある場合はそれを読む
#+BEGIN_SRC emacs-lisp
  (my:not-locate-library auto-complete-config "site-lisp/auto-complete-el")
  (require 'auto-complete-config)
  (add-to-list 'ac-dictionary-directories "~/.emacs.d/share/ac-dict")
  (ac-config-default)
#+END_SRC
* 初期設定
** 全てのモードで補完を有効に
#+BEGIN_SRC emacs-lisp
  (global-auto-complete-mode t)
#+END_SRC
** 自動起動の停止
#+BEGIN_SRC emacs-lisp
  (setq ac-auto-start nil)
#+END_SRC
** キー設定
    M-Tab に割り当て
#+BEGIN_SRC emacs-lisp
  (define-key ac-mode-map (kbd "M-TAB") 'auto-complete)
#+END_SRC
    補完メニュー表示時には C-n/C-p で選択
#+BEGIN_SRC emacs-lisp
  (setq ac-use-menu-map t)
  (define-key ac-menu-map "\C-n" 'ac-next)
  (define-key ac-menu-map "\C-p" 'ac-previous)
  (define-key ac-completing-map (kbd "C-m") 'ac-complete)
  (define-key ac-completing-map (kbd "M-/") 'ac-stop)
#+END_SRC
** 表示関連
    待ち時間を長めに
#+BEGIN_SRC emacs-lisp
  (setq ac-delay 0.2)
#+END_SRC
    補完候補をソート
#+BEGIN_SRC emacs-lisp
  (setq ac-use-comphist t)
#+END_SRC
    補完候補の表示件数を無制限に(デフォルト10件)
#+BEGIN_SRC emacs-lisp
  (setq ac-candidate-limit nil)
#+END_SRC
    クイックヘルプが表示されるとバッファが大きく変更される場合がるので停止
#+BEGIN_SRC emacs-lisp
  (setq ac-use-quick-help nil)
#+END_SRC
    補完推測
#+BEGIN_SRC emacs-lisp
  (setq ac-use-comphist nil)
#+END_SRC
** ヒストリ置き場の変更
#+BEGIN_SRC emacs-lisp
  (setq ac-comphist-file (concat user-emacs-directory "tmp/ac-comphist.dat"))
#+END_SRC
* flyspell-mode 用の work around
#+BEGIN_SRC emacs-lisp
  (ac-flyspell-workaround)
#+END_SRC
