<!DOCTYPE html>
<html lang="ja">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Youhei SASAKI's official site: Emacs の設定</title>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.min.js"></script>
      <script src="/js/respond.min.js"></script>
    <![endif]-->
    <!-- favicon -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  </head>


  <body>
    <header>
      <!-- Fixed navbar -->
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            
            <a class="navbar-brand" href="http://www.gfd-dennou.org/member/uwabami/index.html.ja">Youhei SASAKI's official site</a>
            
          </div> <!-- /.navbar-header -->
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              
              <li><a href="http://www.gfd-dennou.org/member/uwabami/research/index.html.ja">Research</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Software <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="http://uwabami.github.io/">Github</a></li>
                  <li><a href="http://www.gfd-dennou.org/member/uwabami/cc-env/index.html">Computer Memo</a></li>
                </ul>
              </li>
              <li><a href="http://uwabami.junkhub.org/log/">Blog</a></li> 
              
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li>
                
                <a href="/emacs/">English</a>
                
              </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </header>


<a href="https://github.com/uwabami/emacs/">
  <img style="position: absolute; top: 80px; right: 0; border: 0; z-index: 2;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
</a>
<div class="container">
  <div class="content">
    <div class="row">
      <div class="page-header col-xs-12">
        <h1 class="gh-pages">Emacs の設定</h1>
<ul class="breadcrumb">

<li><a href="http://www.gfd-dennou.org/member/uwabami/index.html.ja#">Top</a> </li>
<li><a href="http://uwabami.github.io/index.html">Github</a></li>

</ul>

      </div>
      <div class="col-xs-12">
<h2><a id="はじめに"><span class='anchor'>_</span></a>はじめに</h2>
<p>ここでは，私の Emacs の設定についてまとめています．</p>
<p>基本方針は以下の通り:</p>
<h3><a id="Emacs のパッケージは [[http://cask.readthedocs.io/en/latest/][Cask]] と [[https://github.com/rdallasgray/pallet][pallet]] で管理"><span class='anchor'>_</span></a>Emacs のパッケージは <a href="http://cask.readthedocs.io/en/latest/">Cask</a> と <a href="https://github.com/rdallasgray/pallet">pallet</a> で管理</h3>
<p>以前は <a href="https://github.com/dimitri/el-get">El-Get</a> を使っていたのですが，
  環境によって info が無いとか，
  Git 等 VCS が通らん proxy 下，とか
  作業環境がとてもシンドイので，結局&#8230;という感じです．</p>
<p>個人的には <a href="https://github.com/dimitri/el-get">El-Get</a> が好きなのでそのうちまた戻すかもしれません．</p>
<ul>
  <li><a href="http://tarao.hatenablog.com/entry/20150221/1424518030">Caskはもう古い，これからはEl-Get - いまどきのEmacsパッケージ管理 - 貳佰伍拾陸夜日記</a></li>
</ul>
<h3><a id="Debian パッケージがインストールされているならば，それを優先する"><span class='anchor'>_</span></a>Debian パッケージがインストールされているならば，それを優先する</h3>
<p>はい，個人の我侭ですね．:<a href="https://en.wikipedia.org/wiki/Eating_your_own_dog_food">Eating your own dog food - Wikipedia</a></p>
<p>Emacsに関連するDebianパッケージを幾つかメンテナンスしているので，
  可能な限りDebianパッケージを使うことにしています．</p>
<p>自分が root 持っていない環境ではしょうがないですけれど．</p>
<h3><a id="設定は [[http://orgmode.org/][Org mode]] で書きたい"><span class='anchor'>_</span></a>設定は <a href="http://orgmode.org/">Org mode</a> で書きたい</h3>
<p>以前こんなブログ記事を書きました: <a href="http://uwabami.junkhub.org/log/20111213.html#p01">Emacsの設定ファイルをorgで書く</a></p>
<p>というわけで，設定は <a href="http://orgmode.org/worg/org-contrib/babel/intro.html">Org Babel</a> で書いています．</p>
<h4><a id="=~/.emacs.d/init.el= の生成"><span class='anchor'>_</span></a><code>~/.emacs.d/init.el</code> の生成</h4>
<p>本ファイル(<code>README.org</code>) から，
  Makefile 内の以下のスクリプトで <code>~/init.el</code> を生成し，byte-compile します．</p>
<div class="highlight"><pre><span></span>init.el: README.org
	$(EMACS) -q --batch --eval \
		 &quot;(progn \
			(require &#39;ob) \
		  (require &#39;ob-tangle) \
		  (org-babel-tangle-file \&quot;$&lt;\&quot; \&quot;$@\&quot; \&quot;emacs-lisp\&quot;)))&quot;
%.elc: %.el
	$(EMACS) -l $&lt; -batch -f batch-byte-compile $&lt;
</pre></div>
<h2><a id="ディレクトリ構成"><span class='anchor'>_</span></a>ディレクトリ構成</h2>
<p>以前は <code>~/.emacs</code> に設定を書いていましたが，
  最近は <code>~/.emacs.d/init.el</code> を使うのが主流ですね．
  さらに，適切な設定を行なうことで Emacs 起動時に読み込んだ elisp ファイ
  ルのあるディレクトリを <code>user-emacs-directory</code> として扱えます．</p>
<p>そんな訳で，分割した設定ファイル群やパッケージで install したパッケージ
  の置き場所も=user-emacs-directory= 以下にまとめています．</p>
<p>試行錯誤の結果，ディレクトリ構成は以下のようにしました:</p>
<pre class="example">
~/.emacs.d/
 |-- Makefile        ←  byte-compile 用の rule
 |-- README.org      ←  本ファイル．`org-babel-tangle&#39; で init.el を生成
 |-- init-foobar.org ←  外部ファイルを使うパッケージの設定ファイル
 |-- share/          ←  git submodule など, (基本的に)参照するだけの資源置き場所
 `-- tmp/            ←  一次ファイルの置き場所
</pre>
<p>上記ディレクトリ構成を設定ファイルで使用するためにディレクトリ配置を宣言しておきます．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">when</span> <span class="nv">load-file-name</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">user-emacs-directory</span> <span class="p">(</span><span class="nf">file-name-directory</span> <span class="nv">load-file-name</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">defconst</span> <span class="nv">my:d:share</span>
  <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&quot;share/&quot;</span> <span class="nv">user-emacs-directory</span><span class="p">))</span>
<span class="p">(</span><span class="nf">defconst</span> <span class="nv">my:d:tmp</span>
  <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&quot;tmp/&quot;</span> <span class="nv">user-emacs-directory</span><span class="p">))</span>
<span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nf">file-directory-p</span> <span class="nv">my:d:tmp</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">make-directory</span> <span class="nv">my:d:tmp</span><span class="p">))</span>
</pre></div>
<p>ついでに，
  <code>custom-set-variables</code> は別ファイルに出力するようにしておきます．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">custom-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;custom.el&quot;</span><span class="p">))</span>
</pre></div>
<p>これは単なる趣味です．
  <code>init.elが汚れる気がしてあまり好きではないのですが...皆さん気にしてないんですかね</code></p>
<h2><a id="Package 関連: package.el, [[http://cask.readthedocs.io/en/latest/][Cask]], [[https://github.com/rdallasgray/pallet][pallet]], use-package"><span class='anchor'>_</span></a>Package 関連: package.el, <a href="http://cask.readthedocs.io/en/latest/">Cask</a>, <a href="https://github.com/rdallasgray/pallet">pallet</a>, use-package</h2>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;package</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;package-archives</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;melpa&quot;</span> <span class="o">.</span> <span class="s">&quot;https://melpa.org/packages/&quot;</span><span class="p">)</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;package-archives</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;org&quot;</span> <span class="o">.</span> <span class="s">&quot;http://orgmode.org/elpa/&quot;</span><span class="p">)</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">package-initialize</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;load-path</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:share</span> <span class="s">&quot;cask&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;cask</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">)</span>
<span class="p">(</span><span class="nf">cask-initialize</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;use-package</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">)</span>
<span class="p">(</span><span class="nf">use-package</span> <span class="nv">pallet</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">pallet-mode</span> <span class="nv">t</span><span class="p">))</span>
</pre></div>
<h2><a id="byte-compile 用の雑多な設定"><span class='anchor'>_</span></a>byte-compile 用の雑多な設定</h2>
<h3><a id="常に cl を読み込む → =cl-lib= を読み込むように変更"><span class='anchor'>_</span></a>常に cl を読み込む → <code>cl-lib</code> を読み込むように変更</h3>
<p>以前は(今も?)「 <code>cl.el</code> は名前衝突があるので byte compile 時以外は読み込まない様にしよう」
  というお話でした．つまり，</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">eval-when-compile</span> <span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;cl</span><span class="p">))</span>
</pre></div>
<p>としておくこと，という．</p>
<p>今は <code>cl.el</code> は deprecated なので， <code>cl-lib</code> を使いましょう，ということみたいです．
  名前衝突の回避のために，関数の接頭詞として <code>cl-</code> が付くようになったのは御愛嬌．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">eval-and-compile</span> <span class="p">(</span><span class="nf">use-package</span> <span class="nv">cl-lib</span><span class="p">))</span>
</pre></div>
<h3><a id="debug は表示しない: 必要に応じて t に変更する"><span class='anchor'>_</span></a>debug は表示しない: 必要に応じて t に変更する</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">debug-on-error</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h3><a id="=.elc= と =.el= の timestamp を比較し，新しい方を読み込む"><span class='anchor'>_</span></a><code>.elc</code> と <code>.el</code> の timestamp を比較し，新しい方を読み込む</h3>
<p><code>load-prefer-newer</code> は Emacs &gt;= 24.4 から．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nf">boundp</span> <span class="ss">&#39;load-prefer-newer</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">load-prefer-newer</span> <span class="nv">t</span><span class="p">))</span>
</pre></div>
<h3><a id="Compile-Log の非表示"><span class='anchor'>_</span></a>Compile-Log の非表示</h3>
<p>ほとんど見ないし．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">win</span> <span class="p">(</span><span class="nf">get-buffer-window</span> <span class="s">&quot;*Compile-Log*&quot;</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">when</span> <span class="nv">win</span> <span class="p">(</span><span class="nf">delete-window</span> <span class="nv">win</span><span class="p">)))</span>
</pre></div>
<h3><a id="Warning の抑制"><span class='anchor'>_</span></a>Warning の抑制</h3>
<p>これもほとんど見ないし．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">byte-compile-warnings</span>
      <span class="o">&#39;</span><span class="p">(</span><span class="nv">not</span>
        <span class="nv">free-vars</span>
        <span class="nv">unresolved</span>
        <span class="nv">callargs</span>
        <span class="nv">redefine</span>
        <span class="nv">obsolete</span>
        <span class="nv">noruntime</span>
        <span class="nv">cl-functions</span>
        <span class="nv">interactive-only</span>
        <span class="nv">make-local</span>
        <span class="p">))</span>
</pre></div>
<h2><a id="独自関数"><span class='anchor'>_</span></a>独自関数</h2>
<h3><a id="カーソルのある位置の face を調べる関数"><span class='anchor'>_</span></a>カーソルのある位置の face を調べる関数</h3>
<p>わりと良く使う. 地味に便利</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:describe-face-at-point</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">message</span> <span class="s">&quot;%s&quot;</span> <span class="p">(</span><span class="nf">get-char-property</span> <span class="p">(</span><span class="nf">point</span><span class="p">)</span> <span class="ss">&#39;face</span><span class="p">)))</span>
</pre></div>
<h3><a id="dpkg-status"><span class='anchor'>_</span></a>dpkg-status</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:dpkg-status</span> <span class="p">(</span><span class="nf">package</span><span class="p">)</span>
  <span class="s">&quot;Return the package status from dpkg --get-selections.&quot;</span>
  <span class="p">(</span><span class="nf">string-match</span> <span class="s">&quot;^ii&quot;</span> <span class="p">(</span><span class="nf">shell-command-to-string</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&quot;dpkg -l %s&quot;</span> <span class="nv">package</span><span class="p">))))</span>
</pre></div>
<h2><a id="環境変数の読み込み: =exec-path-from-shell="><span class='anchor'>_</span></a>環境変数の読み込み: <code>exec-path-from-shell</code></h2>
<p>zsh で設定した <code>PATH</code> などの環境変数を Emacs に引き継ぐために
  <a href="https://github.com/purcell/exec-path-from-shell">purcell/exec-path-from-shell</a> を使います．
  今の所</p>
<ul>
  <li><code>SHELL</code></li>
  <li><code>DEBFULLNAME</code></li>
  <li><code>DEBEMAIL</code></li>
  <li><code>TEXMFHOME</code></li>
  <li><code>SKKSERVER</code></li>
  <li><code>http_proxy</code></li>
  <li><code>GPG_KEY_ID</code></li>
  <li><code>GPG_AGENT_INFO</code></li>
</ul>
<p>を読み込んでいます．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nf">executable-find</span> <span class="s">&quot;zsh&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">progn</span>
    <span class="p">(</span><span class="nf">setq-default</span> <span class="nv">explicit-shell-file-name</span> <span class="s">&quot;zsh&quot;</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">setq</span> <span class="nv">shell-file-name</span> <span class="s">&quot;zsh&quot;</span>
          <span class="nv">shell-command-switch</span> <span class="s">&quot;-c&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">use-package</span> <span class="nv">exec-path-from-shell</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">memq </span><span class="nv">window-system</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">mac</span> <span class="nv">ns</span><span class="p">))</span> <span class="p">(</span><span class="nf">exec-path-from-shell-initialize</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">exec-path-from-shell-copy-envs</span>
   <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;SHELL&quot;</span>
     <span class="s">&quot;DEBFULLNAME&quot;</span>
     <span class="s">&quot;DEBEMAIL&quot;</span>
     <span class="s">&quot;SKKSERVER&quot;</span>
     <span class="s">&quot;TEXMFHOME&quot;</span>
     <span class="s">&quot;http_proxy&quot;</span>
     <span class="s">&quot;GPG_KEY_ID&quot;</span>
     <span class="s">&quot;GPG_AGENT_INFO&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">user-full-name</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nf">getenv</span> <span class="s">&quot;DEBFULLNAME&quot;</span><span class="p">))</span>
        <span class="nv">user-mail-address</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nf">getenv</span> <span class="s">&quot;DEBEMAIL&quot;</span><span class="p">))))</span>
</pre></div>
<h2><a id="言語の設定"><span class='anchor'>_</span></a>言語の設定</h2>
<p>過去にはいろいろ設定していたのですが&#8230;</p>
<ul>
  <li><a href="http://masutaka.net/chalow/2009-07-09-1.html">Emacs講座 -第7回- 文字コード / マスタカの ChangeLog メモ</a></li>
</ul>
<blockquote>
  <p>いきなり矛盾しますが，最近の Emacs(例:23.3) では文字コードの設定は不要です．</p>
</blockquote>
<p>&#8230;え, そうなのか&#8230;</p>
<p>というわけで OS 依存の条件分岐だけを記述しています．</p>
<p>ちなみに
  <code>prefer-coding-system</code> を設定すると
  <code>default-file-name-coding-system</code> が設定されます．
  優先順位は以下の通り:</p>
<ol>
  <li><code>file-name-coding-system</code> を見る</li>
  <li><code>file-name-coding-system</code> が nil なら <code>default-file-name-coding-system</code> を利用</li>
</ol>
<h3><a id="cp5022x.el"><span class='anchor'>_</span></a>cp5022x.el</h3>
<p>Emacs23 から内部が Unicode ベースになっています．</p>
<p>しかし文字コードの変換は GNU libc の iconv をベースにしているため，
  環境によっては文字の変換がうまく行なえません．
  そこで言語設定前に <code>cp5022x.el</code> をインストールすることにしています．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">cp5022x</span><span class="p">)</span>
</pre></div>
<h3><a id="East Asian Ambiguos 対応"><span class='anchor'>_</span></a>East Asian Ambiguos 対応</h3>
<p>CJK 以外の East Asian Ambiguos，絵文字も2文字幅にするようにしています．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">eaw_and_emoji</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">eaw-and-emoji-fullwidth</span><span class="p">))</span>
<span class="c1">;; (setq nobreak-char-display nil)</span>
</pre></div>
<h3><a id="OSの違いに起因する条件分岐"><span class='anchor'>_</span></a>OSの違いに起因する条件分岐</h3>
<p>Mac と Linux では同じ Unicode でも正規化が異なります
  (具体的には Mac のファイルシステムである HFS+ では Unicode の正規化が異なります).
  Unicode の正規化と Mac OS X 特有の事情については</p>
<ul>
  <li><a href="http://homepage1.nifty.com/nomenclator/unicode/normalization.htm">Unicode正規化とは</a></li>
  <li><a href="http://www.sakito.com/2010/05/mac-os-x-normalization.html">Mac OS X におけるファイル名に関するメモ(NFC, NFD等)</a></li>
</ul>
<p>等が参考になるでしょう.</p>
<p>日本語のファイル名を扱うことは滅多にないものの,
  たまに祟りがあるのでそれを回避するための設定をしています.</p>
<p>Windows の場合はファイル名などは cp932 にしているものの,
  最近 Windows 使っていないので良く知りません.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">cond</span>
 <span class="p">((</span><span class="nf">eq</span> <span class="nv">system-type</span> <span class="ss">&#39;darwin</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;ucs-normalize</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">set-file-name-coding-system</span> <span class="ss">&#39;utf-8-hfs</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">locale-coding-system</span> <span class="ss">&#39;utf-8-hfs</span><span class="p">)</span>
  <span class="c1">;; ついでにキーバインド: Ctrl を Mac から奪い取る</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">mac-pass-control-to-system</span> <span class="nv">t</span><span class="p">)</span>
  <span class="c1">;; Cmd と Option を逆にする</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ns-command-modifier</span> <span class="ss">&#39;meta</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ns-alternate-modifier</span> <span class="ss">&#39;super</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">global-set-key</span> <span class="p">[</span><span class="nv">ns-drag-file</span><span class="p">]</span> <span class="ss">&#39;ns-find-file</span><span class="p">))</span>
 <span class="p">((</span><span class="nf">eq</span> <span class="nv">system-type</span> <span class="ss">&#39;windows-nt</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">set-file-name-coding-system</span> <span class="ss">&#39;cp932</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">prefer-coding-system</span> <span class="ss">&#39;cp932</span><span class="p">)</span>
  <span class="p">)</span>
 <span class="p">(</span><span class="nf">t</span>
  <span class="c1">;; do nothing</span>
  <span class="p">)</span>
 <span class="p">)</span>
</pre></div>
<h2><a id="主にEmacs本体に同梱されている拡張に関する設定"><span class='anchor'>_</span></a>主にEmacs本体に同梱されている拡張に関する設定</h2>
<h3><a id="無効化するための関数の定義"><span class='anchor'>_</span></a>無効化するための関数の定義</h3>
<p><code>line-number-mode</code> など「有効無効をtoggleする関数」は
  慣習的に <code>0</code> 以下の数字を指定すると明示的に無効化できるので，
  <code>-1</code> を設定する関数を定義しておく.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:disable-builtin-mode</span> <span class="p">(</span><span class="nf">mode</span><span class="p">)</span>
  <span class="s">&quot;与えられた mode が存在するのであれば -1 をセットして無効化&quot;</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">fboundp</span> <span class="nv">mode</span><span class="p">)</span> <span class="p">(</span><span class="nf">funcall</span> <span class="nv">mode</span> <span class="mi">-1</span><span class="p">)))</span>
</pre></div>
<h3><a id="基本的なキーバインドの設定"><span class='anchor'>_</span></a>基本的なキーバインドの設定</h3>
<p>既に手癖になってしまっているアレコレ．
  特に <code>[home]</code> と <code>[end]</code> は無いと途方に暮れます．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-h&quot;</span>     <span class="ss">&#39;backward-delete-char</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-c M-a&quot;</span> <span class="ss">&#39;align-regexp</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-c ;&quot;</span>   <span class="ss">&#39;comment-region</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-c M-;&quot;</span> <span class="ss">&#39;uncomment-region</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-/&quot;</span>     <span class="ss">&#39;undo</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-x M-b&quot;</span> <span class="ss">&#39;ibuffer-other-window</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-c M-r&quot;</span> <span class="ss">&#39;replace-regexp</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-c r&quot;</span>   <span class="ss">&#39;replace-string</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;&lt;home&gt;&quot;</span>  <span class="ss">&#39;beginning-of-buffer</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;&lt;end&gt;&quot;</span>   <span class="ss">&#39;end-of-buffer</span><span class="p">)</span>
</pre></div>
<p><a href="https://github.com/k1LoW/emacs-drill-instructor/wiki">鬼軍曹.el</a> とかで強制した方が良いのかも，とかごく偶に思いますが(思うだけ)．</p>
<h3><a id="Emacs server"><span class='anchor'>_</span></a>Emacs server</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">server</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nf">server-running-p</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">server-start</span><span class="p">)))</span>
</pre></div>
<h3><a id="=whitespace=: 空白の強調表示"><span class='anchor'>_</span></a><code>whitespace</code>: 空白の強調表示</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">whitespace</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">whitespace-line-column</span> <span class="mi">72</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">whitespace-style</span>
        <span class="o">&#39;</span><span class="p">(</span><span class="nv">face</span>              <span class="c1">; faceを使って視覚化する．</span>
          <span class="nv">trailing</span>          <span class="c1">; 行末の空白を対象とする．</span>
          <span class="nv">tabs</span>              <span class="c1">; tab</span>
          <span class="nv">spaces</span>            <span class="c1">; space</span>
          <span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">whitespace-display-mappings</span>
        <span class="o">&#39;</span><span class="p">((</span><span class="nf">space-mark</span> <span class="nv">?</span><span class="err">\</span><span class="nv">u3000</span> <span class="p">[</span><span class="nv">?</span><span class="err">\</span><span class="nv">u25a1</span><span class="p">])</span>
          <span class="c1">;; WARNING: the mapping below has a problem. When a TAB</span>
          <span class="c1">;; occupies exactly one column, it will display the character</span>
          <span class="c1">;; ?\xBB at that column followed by a TAB which goes to the</span>
          <span class="c1">;; next TAB column. If this is a problem for you, please,</span>
          <span class="c1">;; comment the line below.</span>
          <span class="p">(</span><span class="nf">tab-mark</span> <span class="nv">?</span><span class="err">\</span><span class="nv">t</span> <span class="p">[</span><span class="nv">?</span><span class="err">\</span><span class="nv">u00BB</span> <span class="nv">?</span><span class="err">\</span><span class="nv">t</span><span class="p">]</span> <span class="p">[</span><span class="nv">?</span><span class="err">\\</span> <span class="nv">?</span><span class="err">\</span><span class="nv">t</span><span class="p">])))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">whitespace-space-regexp</span> <span class="s">&quot;\\(\u3000+\\)&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">global-whitespace-mode</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
<h3><a id="=uniquify=: モードラインのファイル名にディレクトリも表示する"><span class='anchor'>_</span></a><code>uniquify</code>: モードラインのファイル名にディレクトリも表示する</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">uniquify</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">uniquify-buffer-name-style</span> <span class="ss">&#39;post-forward-angle-brackets</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">uniquify-min-dir-content</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
<h3><a id="=saveplace=: 前回の修正位置を記憶する."><span class='anchor'>_</span></a><code>saveplace</code>: 前回の修正位置を記憶する.</h3>
<p>記憶の保存先は <code>~/.emacs.d/tmp/emacs-places</code> に変更.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">saveplace</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq-default</span> <span class="nv">save-place</span> <span class="nv">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">save-place-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;emacs-places&quot;</span><span class="p">)))</span>
</pre></div>
<h3><a id="=time-stamp=: 保存時に timestamp を自動更新"><span class='anchor'>_</span></a><code>time-stamp</code>: 保存時に timestamp を自動更新</h3>
<p>デフォルトではいろいろと衝突したので
  更新文字列を変更し， <code>＄Lastupdate: 2</code> (＄は半角) があったら timestamp を更新する様にした．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">time-stamp</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">time-stamp-active</span> <span class="nv">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">time-stamp-line-limit</span> <span class="mi">10</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">time-stamp-start</span> <span class="s">&quot;$Lastupdate: 2&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">time-stamp-end</span> <span class="s">&quot;\\$&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">time-stamp-format</span> <span class="s">&quot;%03y-%02m-%02d %02H:%02M:%02S&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;before-save-hook</span> <span class="ss">&#39;time-stamp</span><span class="p">))</span>
</pre></div>
<p>モード独自の設定(例えば Org とか)に関しては別途．</p>
<h3><a id="=tramp=: 使わないので無効化?"><span class='anchor'>_</span></a><code>tramp</code>: 使わないので無効化?</h3>
<p>無効化したいんだけれど，うまくいってない，ような&#8230;?</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">tramp-persistency-file-name</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;tramp&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">tramp-default-method</span> <span class="s">&quot;scpx&quot;</span><span class="p">)</span>
</pre></div>
<h3><a id="=bookmark=: bookmark ファイル"><span class='anchor'>_</span></a><code>bookmark</code>: bookmark ファイル</h3>
<p>イマイチ使いこなせてない. 場所だけ変更しておく.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">bookmark-default-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:share</span> <span class="s">&quot;bookmarks&quot;</span><span class="p">))</span>
</pre></div>
<h3><a id="browse-url"><span class='anchor'>_</span></a>browse-url</h3>
<p>Firefox → emacs-w3m → w3 の順で探索． eww もそのうち試す．
  Firefox の呼び出し方が変わったので，そのために関数を追加．
  詳細は <a href="http://www.emacswiki.org/emacs/BrowseUrl">http://www.emacswiki.org/emacs/BrowseUrl</a> を参照のこと．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">browse-url</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">defun</span> <span class="nv">browse-url-firefox</span> <span class="p">(</span><span class="nf">url</span> <span class="nv">&amp;optional</span> <span class="nv">new-window</span><span class="p">)</span>
    <span class="s">&quot;@see http://www.emacswiki.org/emacs/BrowseUrl&quot;</span>
    <span class="p">(</span><span class="nf">interactive</span> <span class="p">(</span><span class="nf">browse-url-interactive-arg</span> <span class="s">&quot;URL: &quot;</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">setq</span> <span class="nv">url</span> <span class="p">(</span><span class="nf">browse-url-encode-url</span> <span class="nv">url</span><span class="p">))</span>
    <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">process-environment</span> <span class="p">(</span><span class="nf">browse-url-process-environment</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">window-args</span> <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">browse-url-maybe-new-window</span> <span class="nv">new-window</span><span class="p">)</span>
                            <span class="p">(</span><span class="k">if </span><span class="nv">browse-url-firefox-new-window-is-tab</span>
                                <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;-new-tab&quot;</span><span class="p">)</span>
                              <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;-new-window&quot;</span><span class="p">))))</span>
           <span class="p">(</span><span class="nf">ff-args</span> <span class="p">(</span><span class="nb">append </span><span class="nv">browse-url-firefox-arguments</span> <span class="nv">window-args</span> <span class="p">(</span><span class="nb">list </span><span class="nv">url</span><span class="p">)))</span>
           <span class="p">(</span><span class="nf">process-name</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&quot;firefox &quot;</span> <span class="nv">url</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">process</span> <span class="p">(</span><span class="nb">apply </span><span class="ss">&#39;start-process</span> <span class="nv">process-name</span> <span class="nv">nil</span>
                           <span class="nv">browse-url-firefox-program</span> <span class="nv">ff-args</span><span class="p">)</span> <span class="p">))))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">browse-url-browser-function</span> <span class="ss">&#39;browse-url-firefox</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-c C-j&quot;</span> <span class="ss">&#39;browse-url-at-point</span><span class="p">))</span>
</pre></div>
<h3><a id="標準機能の設定"><span class='anchor'>_</span></a>標準機能の設定</h3>
<h4><a id="表示関連"><span class='anchor'>_</span></a>表示関連</h4>
<h5><a id="起動時のスプラッシュ画面を表示しない"><span class='anchor'>_</span></a>起動時のスプラッシュ画面を表示しない</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">inhibit-startup-screen</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">inhibit-startup-message</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h5><a id="フレーム, ツールバー等を非表示に"><span class='anchor'>_</span></a>フレーム, ツールバー等を非表示に</h5>
<p>大抵の場合ターミナル内で <code>-nw</code> として起動するし,
  メニューは触ったことないので使わない.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">my:disable-builtin-mode</span> <span class="ss">&#39;tool-bar-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nf">my:disable-builtin-mode</span> <span class="ss">&#39;scroll-bar-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nf">my:disable-builtin-mode</span> <span class="ss">&#39;menu-bar-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nf">my:disable-builtin-mode</span> <span class="ss">&#39;blink-cursor-mode</span><span class="p">)</span>
<span class="c1">;; カーソルの位置が何文字目かを表示する</span>
<span class="p">(</span><span class="nf">my:disable-builtin-mode</span> <span class="ss">&#39;column-number-mode</span><span class="p">)</span>
<span class="c1">;; カーソルの位置が何行目かを表示する</span>
<span class="p">(</span><span class="nf">my:disable-builtin-mode</span> <span class="ss">&#39;line-number-mode</span><span class="p">)</span>
</pre></div>
<h5><a id="ベル無効化"><span class='anchor'>_</span></a>ベル無効化</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">ring-bell-function</span> <span class="ss">&#39;ignore</span><span class="p">)</span>
</pre></div>
<h5><a id="選択リージョンに色付け"><span class='anchor'>_</span></a>選択リージョンに色付け</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">transient-mark-mode</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h5><a id="対応する括弧を強調表示"><span class='anchor'>_</span></a>対応する括弧を強調表示</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">show-paren-mode</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">show-paren-style</span> <span class="ss">&#39;mixed</span><span class="p">)</span>
</pre></div>
<h5><a id="linum-mode"><span class='anchor'>_</span></a>linum-mode</h5>
<p>必要に応じて <code>linum-mode</code> を有効にするので,
  通常はモードラインに行番号や桁番号を表示しないようする.
  ついでに <code>linum-mode</code> を有効にした場合の桁表示を 5 桁に.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">linum-format</span> <span class="s">&quot;%5d &quot;</span><span class="p">)</span>
</pre></div>
<h4><a id="編集関連"><span class='anchor'>_</span></a>編集関連</h4>
<h5><a id="yes or no を y or n に"><span class='anchor'>_</span></a>yes or no を y or n に</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">fset</span> <span class="ss">&#39;yes-or-no-p</span> <span class="ss">&#39;y-or-n-p</span><span class="p">)</span>
</pre></div>
<h5><a id="ファイル名の大文字小文字を区別しない(zsh風)"><span class='anchor'>_</span></a>ファイル名の大文字小文字を区別しない(zsh風)</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">read-file-name-completion-ignore-case</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h5><a id="tab 幅 4, tab でのインデントはしない"><span class='anchor'>_</span></a>tab 幅 4, tab でのインデントはしない</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq-default</span> <span class="nv">tab-width</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq-default</span> <span class="nv">indent-tabs-mode</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h5><a id="文字列は 72 文字で折り返し(RFC2822風味)"><span class='anchor'>_</span></a>文字列は 72 文字で折り返し(RFC2822風味)</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq-default</span> <span class="nv">fill-column</span> <span class="mi">72</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">paragraph-start</span> <span class="o">&#39;</span><span class="s">&quot;^\\([ 　・○&lt;\t\n\f]\\|(?[0-9a-zA-Z]+)\\)&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq-default</span> <span class="nv">auto-fill-mode</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h5><a id="長い行の折り返し"><span class='anchor'>_</span></a>長い行の折り返し</h5>
<p>デフォルトは折り返し有で <code>\C-c M-l</code> で toggle</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">set-default</span> <span class="ss">&#39;truncate-lines</span> <span class="nv">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">truncate-partial-width-windows</span> <span class="nv">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nf">define-key</span> <span class="nv">global-map</span> <span class="p">(</span><span class="nf">kbd</span> <span class="s">&quot;C-c M-l&quot;</span><span class="p">)</span> <span class="ss">&#39;toggle-truncate-lines</span><span class="p">)</span>
</pre></div>
<h5><a id="バッファ終端で newline を入れない"><span class='anchor'>_</span></a>バッファ終端で newline を入れない</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">next-line-add-newlines</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h5><a id="symlink は常においかける"><span class='anchor'>_</span></a>symlink は常においかける</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">vc-follow-symlinks</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h5><a id="変更のあったファイルの自動再読み込み"><span class='anchor'>_</span></a>変更のあったファイルの自動再読み込み</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">global-auto-revert-mode</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
<h5><a id="バックアップとauto-saveの作成/位置の変更"><span class='anchor'>_</span></a>バックアップとauto-saveの作成/位置の変更</h5>
<p>backup と auto-save ファイルを集約する</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">auto-save-list-file-prefix</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;.saves-&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">auto-save-default</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">auto-save-timeout</span> <span class="mi">15</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">auto-save-interval</span> <span class="mi">60</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">make-backup-files</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">backup-by-copying</span> <span class="nv">t</span><span class="p">)</span> <span class="c1">; symlink は使わない</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">backup-directory-alist</span> <span class="o">`</span><span class="p">((</span><span class="s">&quot;.&quot;</span> <span class="o">.</span> <span class="o">,</span><span class="nv">my:d:tmp</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">auto-save-file-name-transforms</span> <span class="o">`</span><span class="p">((</span><span class="s">&quot;.*&quot;</span> <span class="o">,</span><span class="nv">my:d:tmp</span> <span class="nv">t</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">version-control</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">kept-new-versions</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">kept-old-versions</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">delete-old-versions</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">delete-auto-save-files</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h5><a id="recentf"><span class='anchor'>_</span></a>recentf</h5>
<p>最近使ったファイル履歴の保管</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">recentf-max-saved-items</span> <span class="mi">10000</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">recentf-save-file</span>
      <span class="p">(</span><span class="nf">expand-file-name</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;recentf&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">recentf-auto-cleanup</span> <span class="ss">&#39;never</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">recentf-exclude</span>
      <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;.recentf&quot;</span>
        <span class="s">&quot;^/tmp\\.*&quot;</span>
        <span class="s">&quot;^/private\\.*&quot;</span>
        <span class="s">&quot;^/var/folders\\.*&quot;</span>
        <span class="s">&quot;/TAGS$&quot;</span>
        <span class="s">&quot;^/home/uwabami/.mozilla/firefox/jhitnbb2.default/itsalltext\\.*&quot;</span>
        <span class="p">))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;after-init-hook</span> <span class="ss">&#39;recentf-mode</span><span class="p">)</span>
</pre></div>
<h5><a id="Undo/Redo"><span class='anchor'>_</span></a>Undo/Redo</h5>
<p>そのうち undohist と undo-tree を試そうと思っているのですが，
  今のところ特に弄ってません． <code>undo-limit</code> は無限大にしたいのですが，どうするのかな&#8230;?</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">undo-limit</span> <span class="mi">200000</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">undo-strong-limit</span> <span class="mi">260000</span><span class="p">)</span>
<span class="p">(</span><span class="nf">savehist-mode</span> <span class="mi">1</span><span class="p">)</span>        <span class="c1">; ミニバッファの履歴を保存しリストア</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">savehist-file</span>
      <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;history&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">history-length</span> <span class="nv">t</span><span class="p">)</span>  <span class="c1">; t で無制限</span>
</pre></div>
<h4><a id="デイレクトリ整理"><span class='anchor'>_</span></a>デイレクトリ整理</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">url</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">url-configuration-directory</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;url&quot;</span><span class="p">)))</span>
</pre></div>
<h3><a id="ガベージコレクションの頻度を下げる"><span class='anchor'>_</span></a>ガベージコレクションの頻度を下げる</h3>
<p>とりあえず 50 MB にしておく.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">gc-cons-threshold</span> <span class="p">(</span><span class="nb">* </span><span class="mi">50</span> <span class="p">(</span><span class="nb">* </span><span class="mi">1024</span> <span class="mi">1024</span><span class="p">)))</span>
</pre></div>
<h3><a id="行末の無駄な空白/改行を削除する"><span class='anchor'>_</span></a>行末の無駄な空白/改行を削除する</h3>
<p>元ネタ: <a href="http://d.hatena.ne.jp/tototoshi/20101202/1291289625">無駄な行末の空白を削除する(Emacs Advent Calendar jp:2010)</a></p>
<p>ただし, RD や Markdown だと空白行に意味があったりするので，
  必要に応じて拡張子で判断して外している．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defvar</span> <span class="nv">my:delete-trailing-whitespace-exclude-suffix</span>
  <span class="p">(</span><span class="nb">list </span><span class="s">&quot;\\.rd$&quot;</span> <span class="s">&quot;\\.md$&quot;</span> <span class="s">&quot;\\.rbt$&quot;</span> <span class="s">&quot;\\.rab$&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">defun</span> <span class="nv">my:delete-trailing-whitespace</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">cond</span>
   <span class="p">((</span><span class="nf">equal</span> <span class="nv">nil</span>
           <span class="p">(</span><span class="nf">cl-loop</span> <span class="nv">for</span> <span class="nv">pattern</span> <span class="nv">in</span> <span class="nv">my:delete-trailing-whitespace-exclude-suffix</span>
                    <span class="nv">thereis</span> <span class="p">(</span><span class="nf">string-match</span> <span class="nv">pattern</span> <span class="nv">buffer-file-name</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">delete-trailing-whitespace</span><span class="p">))))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;before-save-hook</span> <span class="ss">&#39;my:delete-trailing-whitespace</span><span class="p">)</span>
</pre></div>
<h3><a id="scratch を殺さない. 消したら再生成"><span class='anchor'>_</span></a>scratch を殺さない. 消したら再生成</h3>
<p>&#8230;元ネタがどこだったのか忘れてしまった&#8230;</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:make-scratch</span> <span class="p">(</span><span class="nf">&amp;optional</span> <span class="nv">arg</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">progn</span>
    <span class="c1">;; &quot;*scratch*&quot; を作成して buffer-list に放り込む</span>
    <span class="p">(</span><span class="nf">set-buffer</span> <span class="p">(</span><span class="nf">get-buffer-create</span> <span class="s">&quot;*scratch*&quot;</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">funcall</span> <span class="nv">initial-major-mode</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">erase-buffer</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="k">and </span><span class="nv">initial-scratch-message</span> <span class="p">(</span><span class="nb">not </span><span class="nv">inhibit-startup-message</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">insert</span> <span class="nv">initial-scratch-message</span><span class="p">))</span>
    <span class="p">(</span><span class="k">or </span><span class="nv">arg</span>
        <span class="p">(</span><span class="nf">progn</span>
          <span class="p">(</span><span class="nf">setq</span> <span class="nv">arg</span> <span class="mi">0</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">switch-to-buffer</span> <span class="s">&quot;*scratch*&quot;</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">arg</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nf">message</span> <span class="s">&quot;*scratch* is cleared up.&quot;</span><span class="p">))</span>
          <span class="p">((</span><span class="nb">= </span><span class="nv">arg</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">message</span> <span class="s">&quot;another *scratch* is created&quot;</span><span class="p">)))))</span>

<span class="p">(</span><span class="nf">defun</span> <span class="nv">my:buffer-name-list</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">mapcar</span> <span class="p">(</span><span class="nf">function</span> <span class="nv">buffer-name</span><span class="p">)</span> <span class="p">(</span><span class="nf">buffer-list</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;kill-buffer-query-functions</span>
          <span class="c1">;; *scratch* バッファで kill-buffer したら内容を消去するだけにする</span>
          <span class="p">(</span><span class="nf">function</span> <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
                      <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">string=</span> <span class="s">&quot;*scratch*&quot;</span> <span class="p">(</span><span class="nf">buffer-name</span><span class="p">))</span>
                          <span class="p">(</span><span class="nf">progn</span> <span class="p">(</span><span class="nf">my:make-scratch</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">nil</span><span class="p">)</span>
                        <span class="nv">t</span><span class="p">))))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;after-save-hook</span>
          <span class="c1">;; *scratch* バッファの内容を保存したら</span>
          <span class="c1">;; *scratch* バッファを新しく作る.</span>
          <span class="p">(</span><span class="nf">function</span>
           <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
             <span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nb">member </span><span class="s">&quot;*scratch*&quot;</span> <span class="p">(</span><span class="nf">my:buffer-name-list</span><span class="p">))</span>
               <span class="p">(</span><span class="nf">my:make-scratch</span> <span class="mi">1</span><span class="p">)))))</span>
</pre></div>
<h3><a id="空になったファイルを尋ねずに自動削除"><span class='anchor'>_</span></a>空になったファイルを尋ねずに自動削除</h3>
<p>ゴミが残らないし，地味に便利．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nb">memq </span><span class="ss">&#39;delete-file-if-no-contents</span> <span class="nv">after-save-hook</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">setq</span> <span class="nv">after-save-hook</span>
          <span class="p">(</span><span class="nb">cons </span><span class="ss">&#39;delete-file-if-no-contents</span> <span class="nv">after-save-hook</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">defun</span> <span class="nv">delete-file-if-no-contents</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nf">and</span>
         <span class="p">(</span><span class="nf">buffer-file-name</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">))</span>
         <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">point-min</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">delete-file</span>
     <span class="p">(</span><span class="nf">buffer-file-name</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">)))))</span>
</pre></div>
<h3><a id="=midnight=: 一定期間使用しなかった buffer を自動削除"><span class='anchor'>_</span></a><code>midnight</code>: 一定期間使用しなかった buffer を自動削除</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">midnight</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">clean-buffer-list-delay-general</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
<h2><a id="Copy & Paste: =xclip="><span class='anchor'>_</span></a>Copy &amp; Paste: <code>xclip</code></h2>
<p><code>xclip</code> で clipboard とデータをやりとり．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">xclip</span>
  <span class="nv">:if</span> <span class="p">(</span><span class="nf">executable-find</span> <span class="s">&quot;xclip&quot;</span><span class="p">)</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">turn-on-xclip</span><span class="p">))</span>
</pre></div>
<p>clipboard と PRIMARY の同期には <code>gpaste</code> を使っている．</p>
<h2><a id="日本語入力: [[file:init-ddskk.org][ddskkの設定]]"><span class='anchor'>_</span></a>日本語入力: <a href="init-ddskk.org">ddskkの設定</a></h2>
<p><a href="http://openlab.ring.gr.jp/skk/ddskk-ja.html">Daredevil SKK (DDSKK)</a> をメインで使用中．無いと途方に暮れる．
  ちなみにGTKが有効になっていると <code>gtk-immodule</code> なんかと衝突するので
  <code>~/.Xresources</code> で xim を無効にしておくと良い．
  例えば以下の様に:</p>
<div class="highlight"><pre><span></span><span class="o">!</span> <span class="n">disable</span> <span class="no">XIM</span>
<span class="no">Emacs</span><span class="o">*</span><span class="ss">useXIM</span><span class="p">:</span> <span class="kp">false</span>
</pre></div>
<p>実際の設定は <a href="init-ddskk.org">ddskkの設定</a> で行なっているため, 設定ファイルの位置変更を変更している</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">skk-autoloads</span>
  <span class="nv">:defer</span> <span class="nv">t</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">skk-user-directory</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;skk&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">skk-init-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">user-emacs-directory</span> <span class="s">&quot;init-ddskk&quot;</span><span class="p">))</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">default-input-method</span> <span class="s">&quot;japanese-skk&quot;</span><span class="p">))</span>
</pre></div>
<h2><a id="Elscreen"><span class='anchor'>_</span></a>Elscreen</h2>
<p>modeline の表示そのものは無効化しておく．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">elscreen</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">elscreen-prefix-key</span> <span class="p">(</span><span class="nf">kbd</span> <span class="s">&quot;C-o&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">elscreen-display-tab</span> <span class="mi">4</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">elscreen-display-screen-number</span> <span class="nv">nil</span><span class="p">)</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">elscreen-start</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">defadvice</span> <span class="nv">elscreen-mode-line-update</span>
      <span class="p">(</span><span class="nf">around</span> <span class="nv">my:disable-elscreen-mode-line-update</span> <span class="nv">activate</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">remove-hook</span> <span class="ss">&#39;elscreen-screen-update-hook</span> <span class="ss">&#39;elscreen-mode-line-update</span><span class="p">))</span>
</pre></div>
<h2><a id="校正，辞書等"><span class='anchor'>_</span></a>校正，辞書等</h2>
<h3><a id="spell checker"><span class='anchor'>_</span></a>spell checker</h3>
<p>ispell はコマンドとして <code>aspell</code> を利用する．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">ispell</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">setq-default</span> <span class="nv">ispell-program-name</span> <span class="s">&quot;aspell&quot;</span><span class="p">)</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;ispell-skip-region-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;[^\000-\377]+&quot;</span><span class="p">)))</span>
</pre></div>
<p>flyspell-mode は別途有効化しておいた方が良い?</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;flyspell-mode</span> <span class="s">&quot;flyspell&quot;</span> <span class="s">&quot;spell checking on the fly&quot;</span><span class="p">)</span>
</pre></div>
<h3><a id="辞書"><span class='anchor'>_</span></a>辞書</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">lookup</span>
  <span class="nv">:commands</span> <span class="p">(</span><span class="nf">lookup</span> <span class="nv">lookup-region</span> <span class="nv">lookup-pattern</span><span class="p">)</span>
  <span class="nv">:if</span> <span class="p">(</span><span class="k">and </span><span class="p">(</span><span class="nf">my:dpkg-status</span> <span class="s">&quot;lookup-el&quot;</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">file-exists-p</span> <span class="s">&quot;/usr/local/share/dict/lookup-enabled&quot;</span><span class="p">))</span>
  <span class="nv">:bind</span> <span class="p">((</span><span class="s">&quot;C-c w&quot;</span> <span class="o">.</span> <span class="nv">lookup-pattern</span><span class="p">)</span>
         <span class="p">(</span><span class="s">&quot;C-c W&quot;</span> <span class="o">.</span> <span class="nv">lookup-word</span><span class="p">))</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">lookup-search-agents</span>
        <span class="o">&#39;</span><span class="p">(</span>
          <span class="p">(</span><span class="nf">ndeb</span> <span class="s">&quot;/usr/local/share/dict/eijiro&quot;</span>    <span class="nv">:alias</span> <span class="s">&quot;英辞郎&quot;</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">ndeb</span> <span class="s">&quot;/usr/local/share/dict/waeijiro&quot;</span>  <span class="nv">:alias</span> <span class="s">&quot;和英辞郎&quot;</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">ndeb</span> <span class="s">&quot;/usr/local/share/dict/rikagaku5&quot;</span> <span class="nv">:alias</span> <span class="s">&quot;理化学辞典 第5版&quot;</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">ndeb</span> <span class="s">&quot;/usr/local/share/dict/koujien4&quot;</span>  <span class="nv">:alias</span> <span class="s">&quot;広辞苑 第4版&quot;</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">ndeb</span> <span class="s">&quot;/usr/local/share/dict/wadai5&quot;</span>    <span class="nv">:alias</span> <span class="s">&quot;研究社 和英大辞典 第5版&quot;</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">ndeb</span> <span class="s">&quot;/usr/local/share/dict/eidai6&quot;</span>    <span class="nv">:alias</span> <span class="s">&quot;研究社 英和大辞典 第6版&quot;</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">ndeb</span> <span class="s">&quot;/usr/local/share/dict/colloc&quot;</span>    <span class="nv">:alias</span> <span class="s">&quot;研究社 英和活用大辞典 &quot;</span><span class="p">)</span>
          <span class="p">)))</span>
</pre></div>
<h2><a id="認証関連: =password-store="><span class='anchor'>_</span></a>認証関連: <code>password-store</code></h2>
<h3><a id="id-manager の設定"><span class='anchor'>_</span></a>id-manager の設定</h3>
<p>ID と Password の簡単な組の管理をするのに非常に重宝している．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">id-manager</span>
  <span class="nv">:if</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="s">&quot;~/.gnupg/idm-db.gpg&quot;</span><span class="p">)</span>
  <span class="nv">:bind</span> <span class="p">(</span><span class="s">&quot;M-7&quot;</span> <span class="o">.</span> <span class="nv">idm-open-list-command</span><span class="p">)</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">idm-database-file</span>
        <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&quot;~/.gnupg/idm-db.gpg&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">idm-clipboard-expire-time-sec</span> <span class="mi">30</span><span class="p">))</span>
</pre></div>
<h3><a id="password-store"><span class='anchor'>_</span></a>password-store</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">password-store</span>
  <span class="nv">:if</span> <span class="p">(</span><span class="nf">file-directory-p</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&quot;.password-store&quot;</span> <span class="p">(</span><span class="nf">getenv</span> <span class="s">&quot;HOME&quot;</span><span class="p">)))</span>
  <span class="p">)</span>
</pre></div>
<h2><a id="MUA の設定: =wanderlust="><span class='anchor'>_</span></a>MUA の設定: <code>wanderlust</code></h2>
<p>実際の設定は別ファイルを参照: <a href="init-wl.org">Wanderlust の設定</a></p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">wl</span>
  <span class="nv">:defer</span> <span class="nv">t</span>
  <span class="nv">:if</span> <span class="p">(</span><span class="k">or </span><span class="p">(</span><span class="nf">my:dpkg-status</span> <span class="s">&quot;wl&quot;</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">my:dpkg-status</span> <span class="s">&quot;wl-beta&quot;</span><span class="p">))</span>
  <span class="nv">:commands</span> <span class="p">(</span><span class="nf">wl</span> <span class="nv">wl-other-frame</span> <span class="nv">wl-draft</span><span class="p">)</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">mail-user-agent</span> <span class="ss">&#39;wl-user-agent</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">read-mail-command</span> <span class="ss">&#39;wl</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">define-mail-user-agent</span>
    <span class="ss">&#39;wl-user-agent</span>
    <span class="ss">&#39;wl-user-agent-compose</span>
    <span class="ss">&#39;wl-draft-send</span>
    <span class="ss">&#39;wl-draft-kill</span>
    <span class="ss">&#39;mail-send-hook</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">elmo-msgdb-directory</span> <span class="s">&quot;~/.cache/wanderlust&quot;</span>
        <span class="nv">elmo-maildir-folder-path</span> <span class="s">&quot;~/.cache/wanderlust&quot;</span>
        <span class="nv">elmo-cache-directory</span> <span class="s">&quot;~/.cache/wanderlust&quot;</span>
        <span class="nv">wl-score-files-directory</span> <span class="s">&quot;~/.cache/wanderlust&quot;</span>
        <span class="nv">wl-init-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">user-emacs-directory</span> <span class="s">&quot;init-wl&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nf">file-directory-p</span> <span class="nv">elmo-msgdb-directory</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">make-directory</span> <span class="nv">elmo-msgdb-directory</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nf">file-directory-p</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">elmo-msgdb-directory</span> <span class="s">&quot;/local&quot;</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">make-directory</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">elmo-msgdb-directory</span> <span class="s">&quot;/local&quot;</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nf">file-directory-p</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">elmo-msgdb-directory</span> <span class="s">&quot;/local/Trash&quot;</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">make-directory</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">elmo-msgdb-directory</span> <span class="s">&quot;/local/Trash&quot;</span><span class="p">)))</span>
  <span class="p">)</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="c1">;; emacs mail handler</span>
<span class="p">(</span><span class="nf">defun</span> <span class="nv">my:mailto-compose-mail</span> <span class="p">(</span><span class="nf">mailto-url</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="k">and </span><span class="p">(</span><span class="nf">stringp</span> <span class="nv">mailto-url</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">string-match</span> <span class="s">&quot;\\`mailto:&quot;</span> <span class="nv">mailto-url</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">progn</span>
        <span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;rfc2368</span><span class="p">)</span>
        <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">headers</span> <span class="p">(</span><span class="nf">mapcar</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">h</span><span class="p">)</span> <span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nf">intern</span> <span class="p">(</span><span class="nb">car </span><span class="nv">h</span><span class="p">))</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">h</span><span class="p">)))</span>
                                <span class="p">(</span><span class="nf">rfc2368-parse-mailto-url</span> <span class="nv">mailto-url</span><span class="p">)))</span>
               <span class="p">(</span><span class="nf">good-headers</span> <span class="p">(</span><span class="nf">remove-if</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">h</span><span class="p">)</span> <span class="p">(</span><span class="nb">member </span><span class="p">(</span><span class="nb">car </span><span class="nv">h</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">Body</span><span class="p">)))</span> <span class="nv">headers</span><span class="p">))</span>
               <span class="p">(</span><span class="nf">body</span> <span class="p">(</span><span class="nb">cdr </span><span class="p">(</span><span class="nb">assoc </span><span class="ss">&#39;Body</span> <span class="nv">headers</span><span class="p">))))</span>
          <span class="p">(</span><span class="nf">wl-draft</span> <span class="nv">good-headers</span> <span class="nv">nil</span> <span class="nv">nil</span> <span class="nv">body</span><span class="p">)))))</span>
<span class="c1">;;</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">mime-view-mailcap-files</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;~/.mailcap&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">mime-play-find-every-situations</span> <span class="nv">nil</span>
      <span class="nv">mime-play-delete-file-immediately</span> <span class="nv">nil</span>
      <span class="nv">process-connection-type</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h2><a id="補完: =ido=, =flx-ido=, =smex="><span class='anchor'>_</span></a>補完: <code>ido</code>, <code>flx-ido</code>, <code>smex</code></h2>
<p>少しの間 Anything から Helm に移行して使ってみたけど
  <strong>余計な事しすぎ</strong> で色々設定してもシンドかったので，結局使うのを止めました．</p>
<p>そんな訳で，当分 <code>ido</code> と <code>smex</code> を使うことに．</p>
<h3><a id="=ido= の設定"><span class='anchor'>_</span></a><code>ido</code> の設定</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">ido</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">ido-mode</span> <span class="nv">t</span><span class="p">)</span>
  <span class="c1">;; (ido-everywhere t)  ;; &lt;- Wanderlust みたいに，過去の選択を覚えている奴と相性悪いので.</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ido-enable-prefix</span> <span class="nv">nil</span>             <span class="c1">; prefix match を有効にすると，入力を先頭一致可能</span>
        <span class="nv">ido-confirm-unique-completion</span> <span class="nv">t</span>   <span class="c1">; TAB で名前の一致まで行ない，その後 RET で実行</span>
        <span class="nv">ido-enable-flex-matching</span> <span class="nv">t</span>        <span class="c1">; flex matching を試す際には prefix を無効化すること</span>
        <span class="nv">ido-enable-dot-prefix</span> <span class="nv">t</span>           <span class="c1">; . を prefix として扱う</span>
        <span class="nv">ido-default-file-method</span>   <span class="ss">&#39;selected-window</span>
        <span class="nv">ido-default-buffer-method</span> <span class="ss">&#39;selected-window</span>
        <span class="nv">ido-max-directory-size</span> <span class="mi">100000</span>
        <span class="nv">ido-enable-tramp-completion</span> <span class="nv">nil</span>
        <span class="nv">ido-use-faces</span> <span class="nv">nil</span>                 <span class="c1">; flx-ido の highlight を使う</span>
        <span class="nv">ido-ignore-extensions</span> <span class="nv">t</span>
        <span class="nv">ido-cannot-complete-command</span> <span class="ss">&#39;ido-next-match</span>
        <span class="nv">ido-save-directory-list-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;ido.last&quot;</span><span class="p">))</span>
  <span class="c1">;; 補完で無視する拡張子の追加．そのうち増える．</span>
  <span class="p">(</span><span class="nf">cl-loop</span> <span class="nv">for</span> <span class="nv">ext</span> <span class="nv">in</span>
           <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;.dvi&quot;</span>
             <span class="s">&quot;.fdb_latexmk&quot;</span>
             <span class="s">&quot;.fls&quot;</span>
             <span class="s">&quot;.ilg&quot;</span>
             <span class="s">&quot;.jqz&quot;</span>
             <span class="s">&quot;.mod&quot;</span>
             <span class="s">&quot;.nav&quot;</span>
             <span class="s">&quot;.out&quot;</span>
             <span class="s">&quot;.snm&quot;</span>
             <span class="s">&quot;.synctex.gz&quot;</span>
             <span class="s">&quot;.vrb&quot;</span>
             <span class="p">)</span>
           <span class="k">do </span><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;completion-ignored-extensions</span> <span class="nv">ext</span><span class="p">))</span>
  <span class="c1">;; ido の buffer で skk を無効化しておく.</span>
  <span class="c1">;; 日本語ファイル名は, とりあえず考えないことに.</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;ido-minibuffer-setup-hook</span>
            <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
              <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nf">fboundp</span> <span class="ss">&#39;skk-mode-exit</span><span class="p">)</span>
                <span class="p">(</span><span class="nf">skk-mode-exit</span><span class="p">)))))</span>
</pre></div>
<h3><a id="=flx-ido=: flex match の強化"><span class='anchor'>_</span></a><code>flx-ido</code>: flex match の強化</h3>
<p>曖昧マッチが非常に直感的になった．地味に便利で手放せない．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">flx-ido-mode</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">flx-ido-use-faces</span> <span class="nv">t</span>
      <span class="nv">flx-ido-threshold</span> <span class="mi">10000</span><span class="p">)</span>
</pre></div>
<h3><a id="=ido-grid=: 補完候補の grid 表示"><span class='anchor'>_</span></a><code>ido-grid</code>: 補完候補の grid 表示</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">ido-grid</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ido-grid-max-columns</span> <span class="mi">5</span>
        <span class="nv">ido-grid-start-small</span> <span class="nv">nil</span>
        <span class="nv">ido-grid-indent</span> <span class="mi">2</span>
        <span class="nv">ido-grid-column-padding</span> <span class="mi">3</span>
        <span class="nv">ido-grid-rows</span> <span class="mi">5</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">ido-grid-enable</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">defun</span> <span class="nv">my:ido-minibuffer-truncate-line</span> <span class="p">()</span>
    <span class="p">(</span><span class="nf">set</span> <span class="p">(</span><span class="nf">make-local-variable</span> <span class="ss">&#39;truncate-lines</span><span class="p">)</span> <span class="nv">nil</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;ido-minibuffer-setup-hook</span> <span class="ss">&#39;my:ido-minibuffer-truncate-line</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;ido-setup-hook</span> <span class="ss">&#39;my:ido-minibuffer-truncate-line</span><span class="p">))</span>
</pre></div>
<h3><a id="=ido-recentf=: recentf を ido で"><span class='anchor'>_</span></a><code>ido-recentf</code>: recentf を ido で</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">ido-recentf-open</span> <span class="p">()</span>
  <span class="s">&quot;Use `ido-completing-read&#39; to \\[find-file] a recent file&quot;</span>
  <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">find-file</span> <span class="p">(</span><span class="nf">ido-completing-read</span> <span class="s">&quot;Find recent file: &quot;</span> <span class="nv">recentf-list</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">message</span> <span class="s">&quot;Opening file...&quot;</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">message</span> <span class="s">&quot;Aborting&quot;</span><span class="p">)))</span>
</pre></div>
<h3><a id="=smex="><span class='anchor'>_</span></a><code>smex</code></h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">smex</span>
  <span class="nv">:commands</span> <span class="nv">smex</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">smex-save-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;smex-items&quot;</span><span class="p">)))</span>
</pre></div>
<h3><a id="=ido= と =smex= 関連の keybind"><span class='anchor'>_</span></a><code>ido</code> と <code>smex</code> 関連の keybind</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:ido-keybind-setup</span> <span class="p">()</span>
  <span class="s">&quot;update ido keybind&quot;</span>
  <span class="p">(</span><span class="nf">bind-keys</span> <span class="nv">:map</span> <span class="nv">ido-completion-map</span>
             <span class="p">(</span><span class="s">&quot;C-h&quot;</span> <span class="o">.</span> <span class="nv">ido-delete-backward-updir</span><span class="p">)</span>
             <span class="p">(</span><span class="s">&quot;C-l&quot;</span> <span class="o">.</span> <span class="nv">ido-delete-backward-updir</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;ido-setup-hook</span> <span class="ss">&#39;my:ido-keybind-setup</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-x f&quot;</span>   <span class="ss">&#39;ido-find-file</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-x C-f&quot;</span> <span class="ss">&#39;ido-find-file</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-x C-r&quot;</span> <span class="ss">&#39;ido-recentf-open</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-x d&quot;</span>   <span class="ss">&#39;ido-dired</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-x C-d&quot;</span> <span class="ss">&#39;ido-dired</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-x b&quot;</span>   <span class="ss">&#39;ido-switch-buffer</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-x C-b&quot;</span> <span class="ss">&#39;ido-switch-buffer</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;C-x M-b&quot;</span> <span class="ss">&#39;ibuffer</span><span class="p">)</span>
<span class="p">(</span><span class="nf">bind-key</span> <span class="s">&quot;M-x&quot;</span>     <span class="ss">&#39;smex</span><span class="p">)</span>
</pre></div>
<h2><a id="補完: =yasnippet=, =auto-complete="><span class='anchor'>_</span></a>補完: <code>yasnippet</code>, <code>auto-complete</code></h2>
<h3><a id="yasnippet"><span class='anchor'>_</span></a>yasnippet</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">yasnippet</span>
  <span class="nv">:bind</span> <span class="p">(</span><span class="nf">:map</span> <span class="nv">yas-minor-mode-map</span>
              <span class="p">(</span><span class="s">&quot;C-x y i&quot;</span> <span class="o">.</span> <span class="nv">yas-insert-snippet</span><span class="p">)</span>
              <span class="p">(</span><span class="s">&quot;C-x y n&quot;</span> <span class="o">.</span> <span class="nv">yas-new-snippet</span><span class="p">)</span>
              <span class="p">(</span><span class="s">&quot;C-x y v&quot;</span> <span class="o">.</span> <span class="nv">yas-visit-snippet-file</span><span class="p">)</span>
              <span class="p">(</span><span class="s">&quot;&lt;tab&gt;&quot;</span>   <span class="o">.</span> <span class="nv">nil</span><span class="p">)</span>
              <span class="p">(</span><span class="s">&quot;TAB&quot;</span>     <span class="o">.</span> <span class="nv">nil</span><span class="p">)</span>
              <span class="p">(</span><span class="s">&quot;C-&lt;tab&gt;&quot;</span> <span class="o">.</span> <span class="nv">yas-expand</span><span class="p">))</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">yas-snippet-dirs</span>
        <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&quot;yasnippet&quot;</span> <span class="nv">my:d:share</span><span class="p">)</span>
              <span class="nv">yas-installed-snippets-dir</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">yas-global-mode</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">yas-verbosity</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
<h3><a id="auto-complete"><span class='anchor'>_</span></a>auto-complete</h3>
<h4><a id="基本設定"><span class='anchor'>_</span></a>基本設定</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">auto-complete-config</span>
  <span class="nv">:bind</span> <span class="p">(</span><span class="nf">:map</span> <span class="nv">ac-menu-map</span>
              <span class="p">(</span><span class="s">&quot;C-n&quot;</span> <span class="o">.</span> <span class="nv">ac-next</span><span class="p">)</span>
              <span class="p">(</span><span class="s">&quot;C-p&quot;</span> <span class="o">.</span> <span class="nv">ac-previous</span><span class="p">)</span>
              <span class="nv">:map</span> <span class="nv">ac-completing-map</span>
              <span class="p">(</span><span class="s">&quot;&lt;tab&gt;&quot;</span> <span class="o">.</span> <span class="nv">ac-complete</span><span class="p">)</span>
              <span class="p">(</span><span class="s">&quot;RET&quot;</span>   <span class="o">.</span>  <span class="nv">nil</span><span class="p">)</span>
              <span class="p">(</span><span class="s">&quot;M-/&quot;</span>    <span class="o">.</span> <span class="nv">ac-stop</span><span class="p">))</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;ac-modes</span> <span class="ss">&#39;org-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">ac-flyspell-workaround</span><span class="p">)</span>
  <span class="c1">;; 辞書追加</span>
  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;ac-dictionary-directories</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:share</span> <span class="s">&quot;ac-dict&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-comphist-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;ac-comphist.dat&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-auto-start</span> <span class="mi">4</span><span class="p">)</span>                         <span class="c1">; 4 文字以上で起動</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-auto-show-menu</span> <span class="mi">1</span><span class="p">)</span>                     <span class="c1">; 1秒でメニュー表示</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-use-comphist</span> <span class="nv">t</span><span class="p">)</span>                       <span class="c1">; 補完候補をソート</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-candidate-limit</span> <span class="nv">nil</span><span class="p">)</span>                  <span class="c1">; 補完候補表示を無制限に</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-use-quick-help</span> <span class="nv">nil</span><span class="p">)</span>                   <span class="c1">; tool tip 無し</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">ac-use-menu-map</span> <span class="nv">t</span><span class="p">)</span>                       <span class="c1">; キーバインド</span>
  <span class="c1">;; yasnippet 対応</span>
  <span class="p">(</span><span class="nf">setf</span> <span class="p">(</span><span class="nf">symbol-function</span> <span class="ss">&#39;yas-active-keys</span><span class="p">)</span>
        <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
          <span class="p">(</span><span class="nf">remove-duplicates</span>
           <span class="p">(</span><span class="nf">mapcan</span> <span class="o">#</span><span class="ss">&#39;yas--table-all-keys</span> <span class="p">(</span><span class="nf">yas--get-snippet-tables</span><span class="p">)))))</span>
  <span class="p">(</span><span class="nf">ac-config-default</span><span class="p">))</span>
<span class="c1">;; (setq ac-sources</span>
<span class="c1">;;       &#39;(ac-source-features</span>
<span class="c1">;;         ac-source-functions</span>
<span class="c1">;;         ac-source-yasnippet</span>
<span class="c1">;;         ac-source-variables</span>
<span class="c1">;;         ac-source-symbols</span>
<span class="c1">;;         ac-source-abbrev</span>
<span class="c1">;;         ;; ac-source-dictionary</span>
<span class="c1">;;         ac-source-words-in-same-mode-buffers))</span>
<span class="c1">;; (defun ac-org-mode-setup ()</span>
<span class="c1">;;   (setq ac-sources</span>
<span class="c1">;;         &#39;(</span>
<span class="c1">;;           ;; ac-source-abbrev ; Emacs の略語</span>
<span class="c1">;;           ;; ac-source-css-property ; heavy</span>
<span class="c1">;;           ac-source-dictionary ; 辞書</span>
<span class="c1">;;           ac-source-features</span>
<span class="c1">;;           ac-source-filename</span>
<span class="c1">;;           ac-source-files-in-current-dir</span>
<span class="c1">;;           ac-source-functions</span>
<span class="c1">;;           ;; ac-source-gtags</span>
<span class="c1">;;           ;; ac-source-imenu</span>
<span class="c1">;;           ;; ac-source-semantic</span>
<span class="c1">;;           ;; ac-source-symbols</span>
<span class="c1">;;           ;; ac-source-variables</span>
<span class="c1">;;           ;; ac-source-yasnippet</span>
<span class="c1">;;           )))</span>
<span class="c1">;; ;; (defun ac-default-setup ()</span>
<span class="c1">;; ;;   ;;            (message &quot; &gt;&gt; ac-default-setup&quot;)</span>
<span class="c1">;; ;;   (setq ac-sources</span>
<span class="c1">;; ;;         &#39;(ac-source-abbrev</span>
<span class="c1">;; ;;           ac-source-dictionary</span>
<span class="c1">;; ;;           ac-source-words-in-same-mode-buffers)))</span>
<span class="c1">;; (add-hook &#39;org-mode-hook &#39;ac-org-mode-setup)</span>
</pre></div>
<h4><a id="=look= で英単語の補完"><span class='anchor'>_</span></a><code>look</code> で英単語の補完</h4>
<p>元ネタ: <a href="http://syohex.hatenablog.com/entry/20121225/1356449561">英文を書く際の tips - syohex’s diary</a></p>
<div class="highlight"><pre><span></span><span class="c1">;; (defun my:ac-look ()</span>
<span class="c1">;;   &quot;`look&#39; command with auto-completelook&quot;</span>
<span class="c1">;;   (interactive)</span>
<span class="c1">;;   (unless (executable-find &quot;look&quot;)</span>
<span class="c1">;;     (error &quot;Please install `look&#39; command&quot;))</span>
<span class="c1">;;   (let ((cmd (format &quot;look %s&quot; ac-prefix)))</span>
<span class="c1">;;     (with-temp-buffer</span>
<span class="c1">;;       (call-process-shell-command cmd nil t)</span>
<span class="c1">;;       (split-string-and-unquote (buffer-string) &quot;\n&quot;))))</span>

<span class="c1">;; (defun ac-look ()</span>
<span class="c1">;;   (interactive)</span>
<span class="c1">;;   (let ((ac-menu-height 25)</span>
<span class="c1">;;         (ac-candidate-limit t))</span>
<span class="c1">;;     (auto-complete &#39;(ac-source-look))))</span>

<span class="c1">;; (defvar ac-source-look</span>
<span class="c1">;;   &#39;((candidates . my:ac-look)</span>
<span class="c1">;;     (requires . 5)))</span>

<span class="c1">;; (add-hook &#39;after-change-major-mode-hook</span>
<span class="c1">;;           (lambda ()</span>
<span class="c1">;;             (setq ac-sources (append &#39;(ac-source-look) ac-sources))))</span>
</pre></div>
<h2><a id="カレンダー: =calendar-holidays="><span class='anchor'>_</span></a>カレンダー: <code>calendar-holidays</code></h2>
<p>日本の祝日を表示するために <code>calendar-holidays</code> をインストール</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">japanese-holidays</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;calendar-today-visible-hook</span>   <span class="ss">&#39;japanese-holiday-mark-weekend</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;calendar-today-invisible-hook</span> <span class="ss">&#39;japanese-holiday-mark-weekend</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;calendar-today-visible-hook</span>   <span class="ss">&#39;calendar-mark-today</span><span class="p">)</span>
  <span class="nv">:config</span>
  <span class="c1">;; とりあえず日本のみを表示</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">calendar-holidays</span>
        <span class="p">(</span><span class="nb">append </span><span class="nv">japanese-holidays</span> <span class="nv">holiday-local-holidays</span><span class="p">))</span>
  <span class="c1">;; 祝日をカレンダーに表示</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">mark-holidays-in-calendar</span> <span class="nv">t</span><span class="p">)</span>
  <span class="c1">;; 月と曜日の表示調整</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">calendar-month-name-array</span>
        <span class="p">[</span><span class="s">&quot;01&quot;</span> <span class="s">&quot;02&quot;</span> <span class="s">&quot;03&quot;</span> <span class="s">&quot;04&quot;</span> <span class="s">&quot;05&quot;</span> <span class="s">&quot;06&quot;</span> <span class="s">&quot;07&quot;</span> <span class="s">&quot;08&quot;</span> <span class="s">&quot;09&quot;</span> <span class="s">&quot;10&quot;</span> <span class="s">&quot;11&quot;</span> <span class="s">&quot;12&quot;</span> <span class="p">])</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">calendar-day-name-array</span>
        <span class="p">[</span><span class="s">&quot;日&quot;</span> <span class="s">&quot;月&quot;</span> <span class="s">&quot;火&quot;</span> <span class="s">&quot;水&quot;</span> <span class="s">&quot;木&quot;</span> <span class="s">&quot;金&quot;</span> <span class="s">&quot;土&quot;</span><span class="p">])</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">calendar-day-header-array</span>
        <span class="p">[</span><span class="s">&quot;日&quot;</span> <span class="s">&quot;月&quot;</span> <span class="s">&quot;火&quot;</span> <span class="s">&quot;水&quot;</span> <span class="s">&quot;木&quot;</span> <span class="s">&quot;金&quot;</span> <span class="s">&quot;土&quot;</span><span class="p">])</span>
  <span class="c1">;; ISO format (YYYY/MM/DD) に変更</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">calendar-date-style</span> <span class="ss">&#39;iso</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">calendar-set-date-style</span> <span class="ss">&#39;iso</span><span class="p">)</span>
  <span class="c1">;; 土曜日・日曜日を祝日として表示</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">japanese-holiday-weekend</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">0</span> <span class="mi">6</span><span class="p">)</span>
        <span class="nv">japanese-holiday-weekend-marker</span>
        <span class="o">&#39;</span><span class="p">(</span><span class="nv">holiday</span> <span class="nv">nil</span> <span class="nv">nil</span> <span class="nv">nil</span> <span class="nv">nil</span> <span class="nv">nil</span> <span class="nv">japanese-holiday-saturday</span><span class="p">))</span>
  <span class="c1">;; 日曜開始</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">calendar-week-start-day</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>
<h2><a id="Org"><span class='anchor'>_</span></a>Org</h2>
<p><code>org-mode</code> が無いと生きていけない体になりました</p>
<h3><a id="基本設定"><span class='anchor'>_</span></a>基本設定</h3>
<h4><a id="読み込み"><span class='anchor'>_</span></a>読み込み</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;org</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;org-capture</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;org-archive</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;org-agenda</span><span class="p">)</span>
<span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="k">or </span><span class="p">(</span><span class="nf">my:dpkg-status</span> <span class="s">&quot;wl&quot;</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">my:dpkg-status</span> <span class="s">&quot;wl-beta&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;org-wl</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">))</span>
<span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;org-agenda-property</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">)</span>
</pre></div>
<h4><a id="文字コード強制"><span class='anchor'>_</span></a>文字コード強制</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">modify-coding-system-alist</span> <span class="ss">&#39;file</span> <span class="s">&quot;\\.org\\&#39;&quot;</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
</pre></div>
<h4><a id="auto-mode-alist"><span class='anchor'>_</span></a>auto-mode-alist</h4>
<p>以前のメモの整理のために <a href="http://howm.osdn.jp/index-j.html">howm: Hitori Otegaru Wiki Modoki</a> も使っているので, howm も有効に</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.org$&quot;</span> <span class="o">.</span> <span class="nv">org-mode</span><span class="p">))</span>
<span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.howm$&quot;</span> <span class="o">.</span> <span class="nv">org-mode</span><span class="p">))</span>
</pre></div>
<h4><a id="キーバインド"><span class='anchor'>_</span></a>キーバインド</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">define-key</span> <span class="nv">global-map</span> <span class="p">(</span><span class="nf">kbd</span> <span class="s">&quot;C-c a&quot;</span><span class="p">)</span> <span class="ss">&#39;org-agenda</span><span class="p">)</span>
<span class="c1">;; (define-key global-map (kbd &quot;C-c l&quot;) &#39;org-store-link)</span>
<span class="c1">;; (define-key global-map (kbd &quot;C-c b&quot;) &#39;org-iswitchb)</span>
</pre></div>
<h4><a id="=timestamp=: 更新文字列の変更"><span class='anchor'>_</span></a><code>timestamp</code>: 更新文字列の変更</h4>
<p>保存時の timestamp 更新に引っかける正規表現をちょっと変更．
  デフォルトでは $Lastupdate: &#8230;$ を使っているけれど，org-mode では +DATE: を引っかける.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:org-timestamp-hook</span> <span class="p">()</span>
  <span class="s">&quot;Change `time-stamp-start&#39; in org-mode&quot;</span>
  <span class="p">(</span><span class="nf">set</span> <span class="p">(</span><span class="nf">make-local-variable</span> <span class="ss">&#39;time-stamp-start</span><span class="p">)</span> <span class="s">&quot;#\\+DATE: 2&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">set</span> <span class="p">(</span><span class="nf">make-local-variable</span> <span class="ss">&#39;time-stamp-end</span><span class="p">)</span>   <span class="s">&quot;\$&quot;</span><span class="p">)</span>
  <span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;my:org-timestamp-hook</span><span class="p">)</span>
</pre></div>
<h4><a id="default は Dropbox に保存"><span class='anchor'>_</span></a>default は Dropbox に保存</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-directory</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nf">file-name-as-directory</span> <span class="p">(</span><span class="nf">getenv</span> <span class="s">&quot;HOME&quot;</span><span class="p">))</span> <span class="s">&quot;ownCloud/Dropbox/org/&quot;</span><span class="p">))</span>
</pre></div>
<h4><a id="return でリンクを辿る"><span class='anchor'>_</span></a>return でリンクを辿る</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-return-follows-link</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h4><a id="見出しを畳んで表示"><span class='anchor'>_</span></a>見出しを畳んで表示</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-startup-folded</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h4><a id="画面端での改行はしない"><span class='anchor'>_</span></a>画面端での改行はしない</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-startup-truncated</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h4><a id="narrowing: 編集中の subtree に集中するために"><span class='anchor'>_</span></a>narrowing: 編集中の subtree に集中するために</h4>
<div class="highlight"><pre><span></span><span class="c1">;; default</span>
<span class="c1">;; C-x n s -&gt; org-narrow-to-subtree</span>
<span class="c1">;; C-x n w -&gt; widen</span>
<span class="p">(</span><span class="nf">defun</span> <span class="nv">my:org-narrowing-toggle</span> <span class="p">()</span>
  <span class="s">&quot;buffer の narrowing 状態を toggle する&quot;</span>
  <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nf">buffer-narrowed-p</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">widen</span><span class="p">))</span>
        <span class="p">((</span><span class="nf">region-active-p</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">narrow-to-region</span> <span class="p">(</span><span class="nf">region-beginning</span><span class="p">)</span> <span class="p">(</span><span class="nf">region-end</span><span class="p">)))</span>
        <span class="p">((</span><span class="nf">equal</span> <span class="nv">major-mode</span> <span class="ss">&#39;org-mode</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">org-narrow-to-subtree</span><span class="p">))</span>
        <span class="p">(</span><span class="nf">t</span> <span class="p">(</span><span class="nf">error</span> <span class="s">&quot;Please select a region to narrow to&quot;</span><span class="p">))))</span>
<span class="p">(</span><span class="nf">define-key</span> <span class="nv">org-mode-map</span> <span class="p">(</span><span class="nf">kbd</span> <span class="s">&quot;&lt;f3&gt;&quot;</span><span class="p">)</span>   <span class="ss">&#39;my:org-narrowing-toggle</span><span class="p">)</span>
</pre></div>
<h3><a id="Capture: メモ取り"><span class='anchor'>_</span></a>Capture: メモ取り</h3>
<h4><a id="デフォルトのメモファイル"><span class='anchor'>_</span></a>デフォルトのメモファイル</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-default-notes-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&quot;Memo.org&quot;</span><span class="p">))</span>
</pre></div>
<h4><a id="メモ取り用のキーバインドの追加"><span class='anchor'>_</span></a>メモ取り用のキーバインドの追加</h4>
<p>以前 changelog memo をやっていた時の癖で <code>C-x m</code> をメモにしている</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">define-key</span> <span class="nv">global-map</span> <span class="p">(</span><span class="nf">kbd</span> <span class="s">&quot;C-x m&quot;</span><span class="p">)</span> <span class="ss">&#39;org-capture</span><span class="p">)</span>
</pre></div>
<h4><a id="GTD: 状態の追加"><span class='anchor'>_</span></a>GTD: 状態の追加</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-todo-keywords</span>
      <span class="o">&#39;</span><span class="p">((</span><span class="nf">sequence</span> <span class="s">&quot;TODO(t)&quot;</span> <span class="s">&quot;WAIT(w)&quot;</span> <span class="s">&quot;|&quot;</span> <span class="s">&quot;DONE(d)&quot;</span> <span class="s">&quot;CANCEL(c)&quot;</span> <span class="s">&quot;SOMEDAY(s)&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">type</span> <span class="s">&quot;ARTICLE(a)&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">type</span> <span class="s">&quot;MEMO(m)&quot;</span><span class="p">)</span>
        <span class="p">))</span>
</pre></div>
<h4><a id="GTD: タグの追加"><span class='anchor'>_</span></a>GTD: タグの追加</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-tag-alist</span>
  <span class="o">&#39;</span><span class="p">(</span>
    <span class="p">(</span><span class="s">&quot;OFFICE&quot;</span>     <span class="o">.</span> <span class="nv">?o</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&quot;HOME&quot;</span>       <span class="o">.</span> <span class="nv">?h</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&quot;MAIL&quot;</span>       <span class="o">.</span> <span class="nv">?m</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&quot;WORK&quot;</span>       <span class="o">.</span> <span class="nv">?w</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&quot;Debian&quot;</span>     <span class="o">.</span> <span class="nv">?d</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&quot;Computer&quot;</span>   <span class="o">.</span> <span class="nv">?c</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&quot;Book&quot;</span>       <span class="o">.</span> <span class="nv">?b</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&quot;Emacs&quot;</span>      <span class="o">.</span> <span class="nv">?e</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&quot;TeX&quot;</span>        <span class="o">.</span> <span class="nv">?t</span><span class="p">)</span>
    <span class="p">(</span><span class="s">&quot;Ruby&quot;</span>       <span class="o">.</span> <span class="nv">?r</span><span class="p">)</span>
    <span class="p">))</span>
</pre></div>
<h4><a id="Archive の設定"><span class='anchor'>_</span></a>Archive の設定</h4>
<p>TODO→&#8230;→DONE としたエントリを <code>Arhive.org</code> に移動</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-archive-location</span> <span class="s">&quot;Archive.org::&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">defun</span> <span class="nv">my:org-archive-done-tasks</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
  <span class="c1">;; ARCHIVE タグを付けるだけなら以下</span>
  <span class="c1">;;   (org-map-entries &#39;org-archive-set-tag &quot;/DONE&quot; &#39;file))</span>
  <span class="c1">;; org-archive-location に refile したいなら以下</span>
  <span class="p">(</span><span class="nf">org-map-entries</span> <span class="ss">&#39;org-archive-subtree</span> <span class="s">&quot;/DONE&quot;</span> <span class="ss">&#39;file</span><span class="p">))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;org-todo-statistics-hook</span> <span class="ss">&#39;my:org-archive-done-tasks</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;org-todo-after-statistics-hook</span> <span class="ss">&#39;my:org-archive-done-tasks</span><span class="p">)</span>
</pre></div>
<h4><a id="Refile"><span class='anchor'>_</span></a>Refile</h4>
<div class="highlight"><pre><span></span><span class="c1">;; (setq org-refile-targets</span>
<span class="c1">;;       &#39;((&quot;Diary.org&quot; :level . 1)))</span>
</pre></div>
<h4><a id="Capture Template の追加"><span class='anchor'>_</span></a>Capture Template の追加</h4>
<p>Wanderlust のメールも扱えるようにする．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-capture-templates</span>
      <span class="o">`</span><span class="p">(</span>
        <span class="p">(</span><span class="s">&quot;t&quot;</span> <span class="s">&quot;TODO&quot;</span> <span class="nv">plain</span>
         <span class="p">(</span><span class="nf">file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&quot;Memo.org&quot;</span><span class="p">))</span>
         <span class="s">&quot;* TODO %^&#123;title} %^g\n  %?\n  %a&quot;</span>
         <span class="nv">:prepend</span> <span class="nv">nil</span>
         <span class="nv">:unnarrowed</span> <span class="nv">t</span>
         <span class="nv">:kill-buffer</span> <span class="nv">t</span>
         <span class="p">)</span>
        <span class="c1">;; &quot;* TODO &lt;%&lt;%Y-%m-%d&gt;&gt; %:subject %^g\n  %?\n  %a\n  #+BEGIN_QUOTE\n%i\n  #+END_QUOTE&quot;</span>
        <span class="p">(</span><span class="s">&quot;e&quot;</span> <span class="s">&quot;Email TODO&quot;</span> <span class="nv">plain</span>
         <span class="p">(</span><span class="nf">file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&quot;Memo.org&quot;</span><span class="p">))</span>
         <span class="s">&quot;* TODO [[wl:\%5Bmsgid:%:message-id-no-brackets\%5D][%(replace-regexp-in-string \&quot;\\\\[.*\\\\] \&quot; \&quot;\&quot; \&quot;%:subject\&quot;)]]\n  :PROPERTIES:\n  :CREATED: %u\n  :END:%?\n&quot;</span>
         <span class="nv">:prepend</span> <span class="nv">nil</span>
         <span class="nv">:unnarrowed</span> <span class="nv">nil</span>
         <span class="nv">:kill-buffer</span> <span class="nv">t</span>
         <span class="p">)</span>
        <span class="p">(</span><span class="s">&quot;m&quot;</span> <span class="s">&quot;Memo&quot;</span> <span class="nv">plain</span>
         <span class="p">(</span><span class="nf">file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&quot;Memo.org&quot;</span><span class="p">))</span>
         <span class="s">&quot;* MEMO %t %^&#123;titlle}\n  %?\n  %a&quot;</span>
         <span class="nv">:prepend</span> <span class="nv">nil</span>
         <span class="nv">:unnarrowed</span> <span class="nv">t</span>
         <span class="nv">:kill-buffer</span> <span class="nv">t</span>
         <span class="p">)</span>
        <span class="p">))</span>
</pre></div>
<h3><a id="Agenda"><span class='anchor'>_</span></a>Agenda</h3>
<h4><a id="Agenda 表示で使用するファイル"><span class='anchor'>_</span></a>Agenda 表示で使用するファイル</h4>
<div class="highlight"><pre><span></span><span class="c1">;; (setq org-agenda-files (list org-directory))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">org-agenda-files</span> <span class="nv">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nf">dolist</span> <span class="p">(</span><span class="nf">file</span>
         <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;Archive.org&quot;</span>
           <span class="s">&quot;Diary.org&quot;</span>
           <span class="s">&quot;Memo.org&quot;</span>
           <span class="s">&quot;Schedule.org&quot;</span>
           <span class="s">&quot;GFD.org&quot;</span>
           <span class="s">&quot;KUSM.org&quot;</span>
           <span class="s">&quot;DebianJP.org&quot;</span>
           <span class="s">&quot;twitter.org&quot;</span>
           <span class="s">&quot;journal.org&quot;</span>
           <span class="s">&quot;redmine_GFD.org&quot;</span>
           <span class="s">&quot;redmine_FluidSoc.org&quot;</span>
           <span class="s">&quot;redmine_KUSM.org&quot;</span>
           <span class="c1">;; &quot;twitter_2014.org&quot;</span>
           <span class="c1">;; &quot;twitter_2013.org&quot;</span>
           <span class="c1">;; &quot;twitter_2012.org&quot;</span>
           <span class="c1">;; &quot;twitter_2011.org&quot;</span>
           <span class="c1">;; &quot;twitter_2010.org&quot;</span>
           <span class="c1">;; &quot;twitter_2009.org&quot;</span>
           <span class="c1">;; &quot;twitter_2008.org&quot;</span>
           <span class="c1">;; &quot;twitter_2007.org&quot;</span>
           <span class="p">))</span>
  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;org-agenda-files</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="nv">file</span><span class="p">)))</span>
</pre></div>
<h4><a id="表示のカスタマイズ"><span class='anchor'>_</span></a>表示のカスタマイズ</h4>
<p>初期表示</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-agenda-span</span> <span class="ss">&#39;day</span><span class="p">)</span>
</pre></div>
<p>趣味で土曜日をの face を追加.
  祝日, 休日を日曜と同じfaceにする. 元ネタは以下:
  @see: <a href="https://julien.danjou.info/blog/2010/org-mode-and-holidays">Org-mode and holidays | Julien Danjou</a></p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-agenda-weekend-days</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="p">(</span><span class="nf">defface</span> <span class="nv">my:org-agenda-date-saturday</span>
  <span class="o">&#39;</span><span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7FBFFF&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">)))</span>
  <span class="s">&quot;Agenda 表示中の土曜日用のface&quot;</span>
  <span class="nv">:group</span> <span class="ss">&#39;org-agenda</span> <span class="p">)</span>

<span class="p">(</span><span class="nf">defun</span> <span class="nv">my:org-agenda-day-face-function</span> <span class="p">(</span><span class="nf">date</span><span class="p">)</span>
  <span class="s">&quot;Compute DATE face for saturday, holidays.&quot;</span>
  <span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nf">org-agenda-todayp</span> <span class="nv">date</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">dolist</span> <span class="p">(</span><span class="nf">file</span> <span class="p">(</span><span class="nf">org-agenda-files</span> <span class="nv">nil</span> <span class="ss">&#39;ifmode</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">member </span><span class="p">(</span><span class="nf">calendar-day-of-week</span> <span class="nv">date</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
        <span class="p">(</span><span class="nf">return</span> <span class="ss">&#39;my:org-agenda-date-saturday</span><span class="p">))</span>
      <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">face</span>
             <span class="p">(</span><span class="nf">dolist</span> <span class="p">(</span><span class="nf">entry</span> <span class="p">(</span><span class="nf">org-agenda-get-day-entries</span> <span class="nv">file</span> <span class="nv">date</span><span class="p">))</span>
               <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">category</span> <span class="p">(</span><span class="nf">with-temp-buffer</span>
                                 <span class="p">(</span><span class="nf">insert</span> <span class="nv">entry</span><span class="p">)</span>
                                 <span class="p">(</span><span class="nf">org-get-category</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">)))))</span>
                 <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="k">or </span><span class="p">(</span><span class="nf">string=</span> <span class="s">&quot;祝日&quot;</span> <span class="nv">category</span><span class="p">)</span>
                           <span class="p">(</span><span class="nf">string=</span> <span class="s">&quot;休日&quot;</span> <span class="nv">category</span><span class="p">))</span>
                   <span class="p">(</span><span class="nf">return</span> <span class="ss">&#39;org-agenda-date-weekend</span><span class="p">))))))</span>
        <span class="p">(</span><span class="nf">when</span> <span class="nv">face</span> <span class="p">(</span><span class="nf">return</span> <span class="nv">face</span><span class="p">))))))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">org-agenda-day-face-function</span> <span class="ss">&#39;my:org-agenda-day-face-function</span><span class="p">)</span>
</pre></div>
<p>日付表示を <code>YYYY/MM/DD</code> に: <code>calendar-date-style</code> で変わってくれると良いのに.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-agenda-format-date</span> <span class="s">&quot;%Y/%m/%d (%a)&quot;</span><span class="p">)</span>
</pre></div>
<p>Org-gcal で取得したカレンダーファイルに合わせて色分け</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defface</span> <span class="nv">my:org-agenda-calendar-KUSM</span>
  <span class="o">&#39;</span><span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7FFF7F&quot;</span><span class="p">)))</span>
  <span class="s">&quot;Agenda 表示中, KUSM.org の表示 face&quot;</span>
  <span class="nv">:group</span> <span class="ss">&#39;org-agenda</span> <span class="p">)</span>
<span class="p">(</span><span class="nf">defface</span> <span class="nv">my:org-agenda-calendar-Schedule</span>
  <span class="o">&#39;</span><span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7FFFFF&quot;</span><span class="p">)))</span>
  <span class="s">&quot;Agenda 表示中, Schedule.org の表示 face&quot;</span>
  <span class="nv">:group</span> <span class="ss">&#39;org-agenda</span> <span class="p">)</span>
<span class="p">(</span><span class="nf">defface</span> <span class="nv">my:org-agenda-calendar-GFD</span>
  <span class="o">&#39;</span><span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#FFFF7F&quot;</span><span class="p">)))</span>
  <span class="s">&quot;Agenda 表示中, GFD.org の表示 face&quot;</span>
  <span class="nv">:group</span> <span class="ss">&#39;org-agenda</span> <span class="p">)</span>
<span class="p">(</span><span class="nf">defface</span> <span class="nv">my:org-agenda-calendar-DebianJP</span>
  <span class="o">&#39;</span><span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#BF7FFF&quot;</span><span class="p">)))</span>
  <span class="s">&quot;Agenda 表示中, DebianJP.org の表示 face&quot;</span>
  <span class="nv">:group</span> <span class="ss">&#39;org-agenda</span> <span class="p">)</span>
<span class="p">(</span><span class="nf">defface</span> <span class="nv">my:org-agenda-calendar-twitter</span>
  <span class="o">&#39;</span><span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#CCCCCC&quot;</span><span class="p">)))</span>
  <span class="s">&quot;Agenda 表示中, Twiiter log の表示 face&quot;</span>
  <span class="nv">:group</span> <span class="ss">&#39;org-agenda</span> <span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;org-finalize-agenda-hook</span>
          <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
            <span class="p">(</span><span class="nf">save-excursion</span>
              <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
              <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="s">&quot;KUSM:&quot;</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)</span>
                <span class="p">(</span><span class="nf">add-text-properties</span> <span class="p">(</span><span class="nf">match-beginning</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-at-eol</span><span class="p">)</span>
                                     <span class="o">&#39;</span><span class="p">(</span><span class="nv">face</span> <span class="nv">my:org-agenda-calendar-KUSM</span><span class="p">)))</span>
              <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
              <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="s">&quot;Schedule:&quot;</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)</span>
                <span class="p">(</span><span class="nf">add-text-properties</span> <span class="p">(</span><span class="nf">match-beginning</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-at-eol</span><span class="p">)</span>
                                     <span class="o">&#39;</span><span class="p">(</span><span class="nv">face</span> <span class="nv">my:org-agenda-calendar-Schedule</span><span class="p">)))</span>
              <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
              <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="s">&quot;DebianJP:&quot;</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)</span>
                <span class="p">(</span><span class="nf">add-text-properties</span> <span class="p">(</span><span class="nf">match-beginning</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-at-eol</span><span class="p">)</span>
                                     <span class="o">&#39;</span><span class="p">(</span><span class="nv">face</span> <span class="nv">my:org-agenda-calendar-DebianJP</span><span class="p">)))</span>
              <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
              <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="s">&quot;GFD:&quot;</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)</span>
                <span class="p">(</span><span class="nf">add-text-properties</span> <span class="p">(</span><span class="nf">match-beginning</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-at-eol</span><span class="p">)</span>
                                     <span class="o">&#39;</span><span class="p">(</span><span class="nv">face</span> <span class="nv">my:org-agenda-calendar-GFD</span><span class="p">)))</span>
              <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
              <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nf">re-search-forward</span> <span class="s">&quot;twitter:&quot;</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)</span>
                <span class="p">(</span><span class="nf">add-text-properties</span> <span class="p">(</span><span class="nf">match-beginning</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-at-eol</span><span class="p">)</span>
                                     <span class="o">&#39;</span><span class="p">(</span><span class="nv">face</span> <span class="nv">my:org-agenda-calendar-twitter</span><span class="p">)))</span>
              <span class="p">)))</span>
</pre></div>
<h4><a id="=org-agenda-custom-commands= GTD 用の表示の追加"><span class='anchor'>_</span></a><code>org-agenda-custom-commands</code> GTD 用の表示の追加</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-agenda-custom-commands</span>
      <span class="o">&#39;</span><span class="p">(</span>
        <span class="p">(</span><span class="s">&quot;n&quot;</span> <span class="s">&quot;agenda and all TODO list&quot;</span>
         <span class="p">(</span>
          <span class="p">(</span><span class="nf">agenda</span> <span class="s">&quot;&quot;</span>
                  <span class="p">((</span><span class="nf">org-agenda-ndays</span> <span class="mi">1</span><span class="p">)</span>
                   <span class="p">(</span><span class="nf">org-agenda-entry-types</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">:timestamp</span> <span class="nv">:sexp</span><span class="p">))))</span>
          <span class="p">(</span><span class="nf">todo</span> <span class="s">&quot;TODO&quot;</span>
                <span class="p">((</span><span class="nf">org-agenda-prefix-format</span> <span class="s">&quot; %i %-22:c&quot;</span><span class="p">))</span>
                <span class="p">)</span>
          <span class="p">(</span><span class="nf">todo</span> <span class="s">&quot;新規|着手|進行中|確認&quot;</span>
                <span class="p">((</span><span class="nf">org-agenda-prefix-format</span> <span class="s">&quot; %i %-22:c&quot;</span><span class="p">))</span>
                <span class="p">)</span>
          <span class="p">(</span><span class="nf">todo</span> <span class="s">&quot;WAIT&quot;</span>
                <span class="p">((</span><span class="nf">org-agenda-prefix-format</span> <span class="s">&quot; %i %-22:c&quot;</span><span class="p">))</span>
                <span class="p">)</span>
          <span class="p">(</span><span class="nf">todo</span> <span class="s">&quot;SOMEDAY&quot;</span>
                <span class="p">((</span><span class="nf">org-agenda-prefix-format</span> <span class="s">&quot; %i %-22:c&quot;</span><span class="p">))</span>
                <span class="p">)</span>
          <span class="p">)</span>
         <span class="p">)</span>
        <span class="p">(</span><span class="s">&quot;N&quot;</span> <span class="s">&quot;All memo entry&quot;</span>
         <span class="p">(</span>
          <span class="p">(</span><span class="nf">todo</span> <span class="s">&quot;MEMO&quot;</span><span class="p">)</span>
          <span class="p">)</span>
         <span class="p">)</span>
        <span class="p">))</span>
</pre></div>
<h3><a id="=org-journal=: 日記"><span class='anchor'>_</span></a><code>org-journal</code>: 日記</h3>
<p>エントリ作成時に日付を入れるために <code>org-jounnal-new-entry</code> を <code>defadvice</code> している</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">org-journal</span>
  <span class="nv">:bind</span> <span class="p">(</span><span class="s">&quot;C-x M&quot;</span> <span class="o">.</span> <span class="nv">org-journal-new-entry</span><span class="p">)</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;org-journal-mode-hook</span>
            <span class="p">(</span><span class="nf">setq</span> <span class="nv">truncate-lines</span> <span class="nv">t</span><span class="p">))</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-journal-dir</span> <span class="nv">org-directory</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-journal-file-format</span> <span class="s">&quot;journal.org&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-journal-date-format</span> <span class="s">&quot;%x (%a)&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-journal-date-prefix</span> <span class="s">&quot;* &quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-journal-time-format</span> <span class="s">&quot;&lt;%Y-%m-%d %R&gt; &quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-journal-time-prefix</span> <span class="s">&quot;** &quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">defadvice</span> <span class="nv">org-journal-new-entry</span> <span class="p">(</span><span class="nf">before</span> <span class="nv">my:org-journal-add-date-entry</span><span class="p">)</span>
    <span class="s">&quot;Insert date entry&quot;</span>
    <span class="p">(</span><span class="nf">find-file-other-window</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">org-journal-dir</span> <span class="nv">org-journal-file-format</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">org-journal-decrypt</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">unless</span>
        <span class="p">(</span><span class="nf">string-match</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="nv">org-journal-date-format</span><span class="p">)</span>
                      <span class="p">(</span><span class="nf">buffer-substring-no-properties</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">)))</span>
      <span class="p">(</span><span class="nf">progn</span>
        <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))</span>
        <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&quot;\n&quot;</span> <span class="nv">org-journal-date-prefix</span>
                        <span class="p">(</span><span class="nf">format-time-string</span> <span class="nv">org-journal-date-format</span><span class="p">)))</span>
        <span class="p">))</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="nf">ad-activate</span> <span class="ss">&#39;org-journal-new-entry</span><span class="p">))</span>
  <span class="c1">;; Key bindings</span>
  <span class="c1">;; (define-key org-journal-mode-map (kbd &quot;C-c C-f&quot;) &#39;org-journal-open-next-entry)</span>
  <span class="c1">;; (define-key org-journal-mode-map (kbd &quot;C-c C-b&quot;) &#39;org-journal-open-previous-entry)</span>
  <span class="c1">;; (define-key org-journal-mode-map (kbd &quot;C-c C-j&quot;) &#39;org-journal-new-entry)</span>
  <span class="c1">;; (define-key calendar-mode-map &quot;j&quot; &#39;org-journal-read-entry)</span>
  <span class="c1">;; (define-key calendar-mode-map (kbd &quot;C-j&quot;) &#39;org-journal-display-entry)</span>
  <span class="c1">;; (define-key calendar-mode-map &quot;]&quot; &#39;org-journal-next-entry)</span>
  <span class="c1">;; (define-key calendar-mode-map &quot;[&quot; &#39;org-journal-previous-entry)</span>
  <span class="c1">;; (define-key calendar-mode-map (kbd &quot;i j&quot;) &#39;org-journal-new-date-entry)</span>
  <span class="c1">;; (define-key calendar-mode-map (kbd &quot;f f&quot;) &#39;org-journal-search-forever)</span>
  <span class="c1">;; (define-key calendar-mode-map (kbd &quot;f w&quot;) &#39;org-journal-search-calendar-week)</span>
  <span class="c1">;; (define-key calendar-mode-map (kbd &quot;f m&quot;) &#39;org-journal-search-calendar-month)</span>
  <span class="c1">;; (define-key calendar-mode-map (kbd &quot;f y&quot;) &#39;org-journal-search-calendar-year)))</span>
</pre></div>
<h3><a id="Babel"><span class='anchor'>_</span></a>Babel</h3>
<h4><a id="コードブロックの font-lock"><span class='anchor'>_</span></a>コードブロックの font-lock</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-src-fontify-natively</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h4><a id="コードブロックのインデント"><span class='anchor'>_</span></a>コードブロックのインデント</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-src-tab-acts-natively</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">org-edit-src-content-indentation</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">org-src-preserve-indentation</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;safe-local-variable-values</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-src-preserve-indentation</span> <span class="o">.</span> <span class="nv">t</span><span class="p">)</span>
             <span class="p">)</span>
</pre></div>
<h4><a id="ditaa"><span class='anchor'>_</span></a>ditaa</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nf">getenv</span> <span class="s">&quot;HOME&quot;</span><span class="p">)</span> <span class="s">&quot;/bin/jditaa.jar&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">progn</span>
    <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-ditaa-jar-path</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nf">getenv</span> <span class="s">&quot;HOME&quot;</span><span class="p">)</span> <span class="s">&quot;/bin/jditaa.jar&quot;</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">org-babel-do-load-languages</span>
     <span class="ss">&#39;org-babel-load-languages</span>
     <span class="o">&#39;</span><span class="p">((</span><span class="nf">ditaa</span> <span class="o">.</span> <span class="nv">t</span><span class="p">)))))</span>
</pre></div>
<h3><a id="Export"><span class='anchor'>_</span></a>Export</h3>
<h4><a id="読み込み"><span class='anchor'>_</span></a>読み込み</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;ox</span><span class="p">)</span>
</pre></div>
<h4><a id="余計な空白の削除"><span class='anchor'>_</span></a>余計な空白の削除</h4>
<blockquote>
  <p>upTeX以外のTeXやHTMLは，日本語の途中で改行があると，
    それを空白とみなしてしまうので，それを除去するようにする．
    ここでは単純に，U+2000 以降の文字同士が改行で分割されていた場合は
    改行を削除する関数に例を示す．</p>
</blockquote>
<p>とのことで，これを頂くことに．</p>
<div class="highlight"><pre><span></span><span class="c1">;; (defun my:remove-org-newlines-at-cjk-text (&amp;optional _mode)</span>
<span class="c1">;;   &quot;先頭が &#39;*&#39;, &#39;#&#39;, &#39;|&#39; でなく，改行の前後が日本の文字の場合はその改行を除去する．&quot;</span>
<span class="c1">;;   (interactive)</span>
<span class="c1">;;   (goto-char (point-min))</span>
<span class="c1">;;   (while (re-search-forward &quot;^\\([^|#*\n].+\\)\\(.\\)\n *\\(.\\)&quot; nil t)</span>
<span class="c1">;;     (if (and (&gt; (string-to-char (match-string 2)) #x2000)</span>
<span class="c1">;;              (&gt; (string-to-char (match-string 3)) #x2000))</span>
<span class="c1">;;         (replace-match &quot;\\1\\2\\3&quot;))</span>
<span class="c1">;;     (goto-char (point-at-bol))))</span>
<span class="c1">;;</span>
<span class="c1">;; (eval-after-load &quot;ox&quot;</span>
<span class="c1">;;   &#39;(progn</span>
<span class="c1">;;      (add-hook &#39;org-export-before-processing-hook</span>
<span class="c1">;;                &#39;my:remove-org-newlines-at-cjk-text)))</span>
</pre></div>
<h4><a id="Beamer export"><span class='anchor'>_</span></a>Beamer export</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">ox-beamer</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;org-latex-classes</span>
               <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;my:beamer&quot;</span>
                 <span class="s">&quot;\\documentclass[dvipdfmx,presentation]&#123;beamer}</span>
<span class="s">                     [NO-DEFAULT-PACKAGES] [NO-PACKAGES] [EXTRA]&quot;</span>
                 <span class="p">(</span><span class="s">&quot;\\section\&#123;%s\}&quot;</span> <span class="o">.</span> <span class="s">&quot;\\section*\&#123;%s\}&quot;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&quot;\\subsection\&#123;%s\}&quot;</span> <span class="o">.</span> <span class="s">&quot;\\subsection*\&#123;%s\}&quot;</span><span class="p">)</span>
                 <span class="p">(</span><span class="s">&quot;\\subsubsection\&#123;%s\}&quot;</span> <span class="o">.</span> <span class="s">&quot;\\subsubsection*\&#123;%s\}&quot;</span><span class="p">))))</span>
</pre></div>
<h3><a id="Org-gcal"><span class='anchor'>_</span></a>Org-gcal</h3>
<p>Google カレンダーと org の予定を同期</p>
<h4><a id="token 等の置き場所の変更"><span class='anchor'>_</span></a>token 等の置き場所の変更</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">request</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">request-storage-directory</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;request&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nf">file-directory-p</span> <span class="nv">request-storage-directory</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">make-directory</span> <span class="nv">request-storage-directory</span><span class="p">)))</span>
</pre></div>
<h4><a id="org-gcal 本体の設定"><span class='anchor'>_</span></a>org-gcal 本体の設定</h4>
<p>実際の情報等は <code>password-store</code> を使って設定しておく.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">org-gcal</span>
  <span class="nv">:if</span> <span class="p">(</span><span class="nf">file-directory-p</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&quot;.password-store&quot;</span> <span class="p">(</span><span class="nf">getenv</span> <span class="s">&quot;HOME&quot;</span><span class="p">)))</span>
  <span class="nv">:commands</span> <span class="p">(</span><span class="nf">org-gcal-fetch</span><span class="p">)</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-gcal-dir</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my:d:tmp</span> <span class="s">&quot;org-gcal&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nf">file-directory-p</span> <span class="nv">org-gcal-dir</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">make-directory</span> <span class="nv">org-gcal-dir</span><span class="p">))</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">alert-log-messages</span> <span class="nv">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">alert-default-style</span> <span class="ss">&#39;log</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-gcal-down-days</span>   <span class="mi">90</span><span class="p">)</span> <span class="c1">;; 過去 3 month</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-gcal-up-days</span>    <span class="mi">180</span><span class="p">)</span> <span class="c1">;; 未来 6 month</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-gcal-auto-archive</span> <span class="nv">nil</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-gcal-token-file</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&quot;.org-gcal-token&quot;</span> <span class="nv">org-gcal-dir</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-gcal-cleint-id</span> <span class="p">(</span><span class="nf">password-store-get</span> <span class="s">&quot;org-gcal/client-id&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">org-gcal-client-secret</span> <span class="p">(</span><span class="nf">password-store-get</span> <span class="s">&quot;org-gcal/client-secret&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">load </span><span class="s">&quot;~/.password-store/org-gcal/calendar-alist.gpg&quot;</span><span class="p">)</span>
  <span class="p">)</span>
</pre></div>
<h3><a id="OrgとRedmine の連携: =orgmine="><span class='anchor'>_</span></a>OrgとRedmine の連携: <code>orgmine</code></h3>
<p>素晴しい!!</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">orgmine</span>
  <span class="nv">:if</span> <span class="p">(</span><span class="nf">file-directory-p</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&quot;.password-store&quot;</span> <span class="p">(</span><span class="nf">getenv</span> <span class="s">&quot;HOME&quot;</span><span class="p">)))</span>
  <span class="nv">:commands</span> <span class="p">(</span><span class="nf">orgmine-mode</span><span class="p">)</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;org-mode-hook</span>
            <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
              <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">assoc </span><span class="s">&quot;om_project&quot;</span> <span class="nv">org-file-properties</span><span class="p">)</span> <span class="p">(</span><span class="nf">orgmine-mode</span><span class="p">))))</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">orgmine-note-block-begin</span> <span class="s">&quot;#+BEGIN_SRC gfm&quot;</span><span class="p">)</span>   <span class="c1">;; 要調整</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">orgmine-note-block-end</span>   <span class="s">&quot;#+END_SRC\n&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">orgmine-default-todo-keyword</span> <span class="s">&quot;新規&quot;</span><span class="p">)</span>
  <span class="c1">;; サーバ設定</span>
  <span class="p">(</span><span class="nb">load </span><span class="s">&quot;~/.password-store/orgmine/servers.gpg&quot;</span><span class="p">))</span>
</pre></div>
<h2><a id="Howm"><span class='anchor'>_</span></a>Howm</h2>
<p>Org を使う前は Howm を使っていました.
  過去のメモを検索するためだけに未だに Howm を使っています.</p>
<h3><a id="ディレクトリの設定"><span class='anchor'>_</span></a>ディレクトリの設定</h3>
<p>メモの内容は Dropbox で同期することに</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-directory</span> <span class="s">&quot;~/ownCloud/Dropbox/org&quot;</span><span class="p">)</span>
<span class="c1">;; メニューと履歴を検索対象から除外するために別ディレクトリへ</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-keyword-file</span> <span class="s">&quot;~/ownCloud/Dropbox/.howm/keys&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-history-file</span> <span class="s">&quot;~/ownCloud/Dropbox/.howm/history&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-menu-file</span> <span class="s">&quot;~/ownCloud/Dropbox/.howm/menu&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-file-name-format</span> <span class="s">&quot;%Y%m%d-%H%M%S.howm&quot;</span><span class="p">)</span>
</pre></div>
<h3><a id="org-mode でメモを書くためにその1"><span class='anchor'>_</span></a>org-mode でメモを書くためにその1</h3>
<p>メモはorgで書くので, org-mode の hook として howm-mode を登録しておきます.
  こうすると C-c が org に取られるので,
  howm の prefix は C-xC-z にしておきます</p>
<div class="highlight"><pre><span></span><span class="c1">;; org と howm の連携</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="ss">&#39;howm-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-unset-key</span> <span class="p">(</span><span class="nf">kbd</span> <span class="s">&quot;C-x C-z&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-prefix</span> <span class="p">(</span><span class="nf">kbd</span> <span class="s">&quot;C-x C-z&quot;</span><span class="p">))</span>
<span class="c1">;; title header は &quot;*&quot;</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-view-title-header</span> <span class="s">&quot;*&quot;</span><span class="p">)</span>
</pre></div>
<h3><a id="読み込み"><span class='anchor'>_</span></a>読み込み</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;howm</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;elscreen-howm</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">)</span>
</pre></div>
<h3><a id="org-mode でメモを書くためにその2"><span class='anchor'>_</span></a>org-mode でメモを書くためにその2</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">eval-after-load</span> <span class="s">&quot;howm-mode&quot;</span>
  <span class="o">&#39;</span><span class="p">(</span><span class="nv">progn</span>
    <span class="c1">;; \C-c \C-c は org に渡す</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">howm-mode-map</span> <span class="p">(</span><span class="nf">kbd</span> <span class="s">&quot;C-c C-c&quot;</span><span class="p">)</span> <span class="nv">nil</span><span class="p">)</span>
    <span class="c1">;; メモを書いたら elscreen を kill</span>
    <span class="p">(</span><span class="nf">define-key</span> <span class="nv">howm-mode-map</span> <span class="p">(</span><span class="nf">kbd</span> <span class="s">&quot;C-x C-z C-c&quot;</span><span class="p">)</span>
      <span class="ss">&#39;howm-save-and-kill-buffer/screen</span><span class="p">)</span>
    <span class="p">))</span>
<span class="c1">;; skk と併用するための設定(Dired-X に C-xC-j を奪われないように)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">dired-bind-jump</span> <span class="nv">nil</span><span class="p">)</span>
<span class="c1">;; 色付けは org-mode 任せ: howm の font-lock を無効化</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-use-color</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h3><a id="検索などの設定"><span class='anchor'>_</span></a>検索などの設定</h3>
<p>結構きまり文句かも.
  Linux以外の環境で GNU grep を使う際の条件分岐は
  ちょっと真面目に設定した方が良いかも. あるいは grep 使わない?</p>
<h4><a id="検索で大文字小文字を区別しない"><span class='anchor'>_</span></a>検索で大文字小文字を区別しない</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-keyword-case-fold-search</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h4><a id="grep の設定"><span class='anchor'>_</span></a>grep の設定</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-view-grep-command</span> <span class="s">&quot;egrep&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-view-fgrep-command</span> <span class="s">&quot;fgrep&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-view-grep-extended-option</span> <span class="nv">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-view-grep-fixed-option</span> <span class="nv">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-view-grep-file-stdin-option</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h4><a id="検索の対象ディレクトリ"><span class='anchor'>_</span></a>検索の対象ディレクトリ</h4>
<p>とりあえず追加しないことに</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-search-other-dir</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h4><a id="検索対象除外ファイル"><span class='anchor'>_</span></a>検索対象除外ファイル</h4>
<p>ad hoc にどんどん増えていくなぁ&#8230;</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-excluded-file-regexp</span>
      <span class="s">&quot;/\\.#\\|[~#]$\\|\\.bak$\\|/CVS/\\|\\.doc\\|\\.pdf\\|\\.txt$\\|\\.html$\\|\\.tex$\\|\\.dvi$\\|\\.fdb_latexmk$\\|\\.ppt$\\|\\.xls$\\|\\.howm-menu$\\|.howm-keys$\\|\\.png$\\|\\.gif$\\|\\.tif$\\|\\.tiff$\\|\\.jpg$\\|\\.jpeg$\\|\\.el$\\|\\.aux$\\|\\.log$\\|Makefile\\|\\.txt$\\|EUC-UCS2\\|\\.fdb_latexmk$\\|latexmkrc\\|\\.gpg$\\|\\.org$&quot;</span><span class="p">)</span>
</pre></div>
<h4><a id="org-mode 連携用"><span class='anchor'>_</span></a>org-mode 連携用</h4>
<p>日付検索用の regexp</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-reminder-regexp-grep-format</span>
      <span class="p">(</span><span class="nf">concat</span> <span class="s">&quot;&lt;&quot;</span> <span class="nv">howm-date-regexp-grep</span> <span class="s">&quot;[ :0-9]*&gt;%s&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-reminder-regexp-format</span>
      <span class="p">(</span><span class="nf">concat</span> <span class="s">&quot;\\(&lt;&quot;</span> <span class="nv">howm-date-regexp</span> <span class="s">&quot;[ :0-9]*&gt;\\)\\(\\(%s\\)\\([0-9]*\\)\\)&quot;</span><span class="p">))</span>
</pre></div>
<h3><a id="メニューなどの表示の設定"><span class='anchor'>_</span></a>メニューなどの表示の設定</h3>
<h4><a id="決まり文句?"><span class='anchor'>_</span></a>決まり文句?</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-menu-top</span> <span class="nv">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-menu-lang</span> <span class="ss">&#39;ja</span><span class="p">)</span>
</pre></div>
<h4><a id="一覧にタイトル表示しない"><span class='anchor'>_</span></a>一覧にタイトル表示しない</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-list-title</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h4><a id="save 時にメニューを更新しない"><span class='anchor'>_</span></a>save 時にメニューを更新しない</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-menu-refresh-after-save</span> <span class="nv">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-refresh-after-save</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h4><a id="新規メモを上に"><span class='anchor'>_</span></a>新規メモを上に</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-prepend</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h4><a id="全メモ一覧時にタイトル表示"><span class='anchor'>_</span></a>全メモ一覧時にタイトル表示</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-list-all-title</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h4><a id="「最近のメモ」一覧時にタイトル表示"><span class='anchor'>_</span></a>「最近のメモ」一覧時にタイトル表示</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-list-recent-title</span> <span class="nv">t</span><span class="p">)</span>
</pre></div>
<h4><a id="「最近のメモ」の表示件数"><span class='anchor'>_</span></a>「最近のメモ」の表示件数</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-menu-recent-num</span> <span class="mi">20</span><span class="p">)</span>
</pre></div>
<h4><a id="メニューを 2 時間キャッシュ"><span class='anchor'>_</span></a>メニューを 2 時間キャッシュ</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-menu-expiry-hours</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
<h4><a id="RET でファイルを開く際, 一覧バッファを消す. C-u RET なら残る"><span class='anchor'>_</span></a>RET でファイルを開く際, 一覧バッファを消す. C-u RET なら残る</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-view-summary-persistent</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<h3><a id="メニュー表示用の関数定義"><span class='anchor'>_</span></a>メニュー表示用の関数定義</h3>
<h4><a id="正規表現で検索, 逆順,  表示件数は =howm-menu-recent-num=, という ad hoc な関数"><span class='anchor'>_</span></a>正規表現で検索, 逆順,  表示件数は <code>howm-menu-recent-num</code>, という ad hoc な関数</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:howm-menu-search</span> <span class="p">(</span><span class="nf">key</span> <span class="nv">&amp;optional</span> <span class="nv">formatter</span> <span class="nv">regexp-p</span><span class="p">)</span>
  <span class="s">&quot;Embed search result of KEY into menu, reverse-order, howm-menu-recent-num&quot;</span>
  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">fixed-p</span> <span class="p">(</span><span class="nb">not </span><span class="nv">regexp-p</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">howm-menu-general</span> <span class="s">&quot;menu-search&quot;</span>
                       <span class="nv">formatter</span>
                       <span class="p">(</span><span class="nf">howm-first-n</span>
                        <span class="p">(</span><span class="nf">howm-sort-items-by-reverse-date</span>
                         <span class="p">(</span><span class="nf">howm-view-search-folder-items</span> <span class="nv">key</span> <span class="p">(</span><span class="nf">howm-folder</span><span class="p">)</span> <span class="nv">nil</span> <span class="nv">fixed-p</span><span class="p">)</span>
                         <span class="p">)</span> <span class="nv">howm-menu-recent-num</span><span class="p">)</span>
                       <span class="p">)))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-menu-allow</span>
        <span class="p">(</span><span class="nb">append </span><span class="o">&#39;</span><span class="p">(</span><span class="nv">my:howm-menu-search</span><span class="p">)</span> <span class="nv">howm-menu-allow</span><span class="p">))</span>
</pre></div>
<h3><a id="編集テンプレートの設定"><span class='anchor'>_</span></a>編集テンプレートの設定</h3>
<p>最近は <code>org-capture</code> でメモを取る事が多いので, あんまり使っていないけれども．</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-dtime-format</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&quot;&lt;&quot;</span> <span class="nv">howm-dtime-body-format</span> <span class="s">&quot;&gt;&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-insert-date-format</span> <span class="s">&quot;&lt;%s&gt;&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-template-date-format</span> <span class="s">&quot;&lt;%Y-%m-%d %a %H:%M:%S&gt;&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-template-file-format</span> <span class="s">&quot;==&gt;%s&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-template</span> <span class="s">&quot;* MEMO %date %cursor\n%file\n&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">howm-reminder-today-format</span> <span class="p">(</span><span class="nf">format</span> <span class="nv">howm-insert-date-format</span> <span class="nv">howm-date-format</span><span class="p">))</span>
</pre></div>
<h2><a id="Textile"><span class='anchor'>_</span></a>Textile</h2>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;safe-local-variable-values</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="nv">orgmine-note-block-begin</span> <span class="o">.</span> <span class="s">&quot;#+BEGIN_SRC textile&quot;</span><span class="p">)</span>
             <span class="p">)</span>
</pre></div>
<h2><a id="Markdown"><span class='anchor'>_</span></a>Markdown</h2>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.\\(md\\|markdown\\)\\&#39;&quot;</span> <span class="o">.</span> <span class="nv">gfm-mode</span><span class="p">))</span>
<span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">executable-find</span> <span class="s">&quot;pandoc&quot;</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">setq</span> <span class="nv">markdown-command</span>
          <span class="s">&quot;pandoc --from markdown_github -t html5 --mathjax --highlight-style pygments&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">with-eval-after-load</span> <span class="s">&quot;markdown-mode&quot;</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;markdown-mode-hook</span>
            <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
               <span class="p">(</span><span class="nf">electric-indent-local-mode</span> <span class="mi">-1</span><span class="p">))))</span>
<span class="p">(</span><span class="nf">with-eval-after-load</span> <span class="s">&quot;gfm-mode&quot;</span>
  <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;gfm-mode-hook</span>
            <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
               <span class="p">(</span><span class="nf">electric-indent-local-mode</span> <span class="mi">-1</span><span class="p">))))</span>
</pre></div>
<h2><a id="SCSS"><span class='anchor'>_</span></a>SCSS</h2>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.scss\\&#39;&quot;</span> <span class="o">.</span> <span class="nv">scss-mode</span><span class="p">))</span>
<span class="p">(</span><span class="nf">with-eval-after-load</span> <span class="s">&quot;scss-mode&quot;</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">scss-sass-command</span> <span class="p">(</span><span class="nf">executable-find</span> <span class="s">&quot;sass&quot;</span><span class="p">)))</span>
</pre></div>
<h2><a id="Ruby"><span class='anchor'>_</span></a>Ruby</h2>
<p>素の <code>ruby-mode</code>. <code>Gemfile</code> も ruby-mode で扱う</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;ruby-mode</span> <span class="s">&quot;ruby-mode&quot;</span> <span class="s">&quot;Mode for editing ruby source files&quot;</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;Gemfile$&quot;</span> <span class="o">.</span> <span class="nv">ruby-mode</span><span class="p">))</span>
</pre></div>
<p><code>ruby-electric</code>: 括弧や <code>do ... end</code> の補完</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;ruby-electric</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;ruby-mode-hook</span> <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">ruby-electric-mode</span> <span class="nv">t</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">ruby-electric-expand-delimiters-list</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<p><code>ruby-block</code>: <code>do...end</code> の対応をハイライト</p>
<div class="highlight"><pre><span></span><span class="c1">;; (el-get-bundle ruby-block)</span>
<span class="c1">;; (require &#39;ruby-block nil &#39;noerror)</span>
<span class="c1">;; (ruby-block-mode t)</span>
<span class="c1">;; (setq ruby-block-highlight-toggle t)</span>
</pre></div>
<p><code>rspec-mode</code>:</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;rspec-mode</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">rspec-use-rake-flag</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
<p><code>rabbit-mode</code>:</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;rabbit-mode</span> <span class="s">&quot;rabbit-mode&quot;</span> <span class="s">&quot;major mode for Rabbit&quot;</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.rab$&quot;</span> <span class="o">.</span> <span class="nv">rabbit-mode</span><span class="p">))</span>
</pre></div>
<h2><a id="C"><span class='anchor'>_</span></a>C</h2>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">eval-when-compile</span> <span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;cc-mode</span><span class="p">))</span>
<span class="p">(</span><span class="nf">c-add-style</span> <span class="s">&quot;my:bsd-like&quot;</span>
             <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;bsd&quot;</span>
               <span class="p">(</span><span class="nf">c-basic-offset</span> <span class="o">.</span> <span class="mi">2</span><span class="p">)</span>
               <span class="p">(</span><span class="nf">c-hanging-braces-alist</span> <span class="o">.</span> <span class="p">((</span><span class="nf">inline-open</span>       <span class="nv">before</span> <span class="nv">after</span><span class="p">)</span>
                                          <span class="p">(</span><span class="nf">block-open</span>        <span class="nv">before</span> <span class="nv">after</span><span class="p">)</span>
                                          <span class="p">(</span><span class="nf">substatement-open</span> <span class="nv">before</span> <span class="nv">after</span><span class="p">)))</span>
               <span class="p">(</span><span class="nf">c-offsets-alist</span> <span class="o">.</span> <span class="p">((</span><span class="nf">brace-list-entry</span> <span class="o">.</span> <span class="nv">+</span><span class="p">)))</span>
               <span class="p">))</span>
<span class="p">(</span><span class="nf">setq-default</span> <span class="nv">c-default-style</span> <span class="s">&quot;my:bsd-like&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;c-mode-hook</span>
          <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
            <span class="p">(</span><span class="nf">c-set-style</span> <span class="s">&quot;my:bsd-like&quot;</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">electric-indent-local-mode</span> <span class="mi">-1</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;c-mode-hook</span>
          <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
            <span class="p">(</span><span class="nf">set</span> <span class="p">(</span><span class="nf">make-local-variable</span> <span class="ss">&#39;eldoc-idle-delay</span><span class="p">)</span> <span class="mf">0.20</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">c-turn-on-eldoc-mode</span><span class="p">)</span>
            <span class="p">))</span>
</pre></div>
<h2><a id="Fortran (>=90)&#8221;><span class='anchor'>_</span></a>Fortran (&gt;=90)</h2>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.\\(f|F\\)\\(90|95|03|08\\)$&quot;</span> <span class="o">.</span> <span class="nv">f90-mode</span><span class="p">))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;f90-mode-hook</span>
          <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
             <span class="p">(</span><span class="nf">setq</span> <span class="nv">f90-do-indent</span> <span class="mi">2</span>
                   <span class="nv">f90-if-indent</span> <span class="mi">2</span>
                   <span class="nv">f90-type-indent</span> <span class="mi">2</span>
                   <span class="nv">f90-program-indent</span> <span class="mi">2</span>
                   <span class="nv">f90-continuation-indent</span> <span class="mi">2</span>
                   <span class="nv">f90-directive-comment-re</span> <span class="s">&quot;!omp\\$&quot;</span>
                   <span class="nv">f90-indented-comment-re</span> <span class="s">&quot;!&quot;</span>
                   <span class="nv">f90-break-delimiters</span> <span class="s">&quot;[-+\\*/&gt;&lt;=,% \t]&quot;</span>
                   <span class="nv">f90-break-before-delimiters</span> <span class="nv">t</span>
                   <span class="nv">f90-beginning-ampersand</span> <span class="nv">nil</span>
                   <span class="nv">f90-smart-end</span> <span class="ss">&#39;blink</span>
                   <span class="nv">f90-auto-keyword-case</span> <span class="nv">nil</span>
                   <span class="nv">f90-leave-line-no</span> <span class="nv">nil</span>
                   <span class="nv">f90-comment-region</span> <span class="s">&quot;!! &quot;</span>
                   <span class="nv">f90-indent-comment</span> <span class="s">&quot;! &quot;</span>
                   <span class="nv">indent-tabs-mode</span> <span class="nv">nil</span>
                   <span class="nv">f90-font-lock-keywords</span> <span class="nv">f90-font-lock-keywords-2</span>
                   <span class="p">)))</span>
<span class="c1">;; (add-hook &#39;f90-mode-hook</span>
<span class="c1">;;           (lambda ()</span>
<span class="c1">;;             (ggtags-mode 1)))</span>
</pre></div>
<h2><a id="TeX"><span class='anchor'>_</span></a>TeX</h2>
<h4><a id="読み込み"><span class='anchor'>_</span></a>読み込み</h4>
<p>Debian パッケージの場合, <code>/etc/emacs/site-start.d/50auctex.el</code> において
  既に <code>auctex.el</code> と <code>preview-latex.el</code> が load されているため
  特に読み込みの設定は必要無い.
  Debian 以外の場合に, <code>auctex.el</code> と <code>preview-latex</code> を読み込む.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="s">&quot;/etc/emacs/site-start.d/50auctex.el&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">load </span><span class="s">&quot;auctex.el&quot;</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">))</span>
</pre></div>
<h4><a id="[[https://github.com/tom-tan/auctex-latexmk][auctex-latexmk]]"><span class='anchor'>_</span></a><a href="https://github.com/tom-tan/auctex-latexmk">auctex-latexmk</a></h4>
<p>AUCTeX で <a href="http://users.phys.psu.edu/~collins/software/latexmk-jcc/">Latexmk</a> を使い,
  かつ platex 実行時に文字コード指定も追加してくれる.
  ここでは,</p>
<ul>
  <li>default の &#8220;LaTeX&#8221; を上書き</li>
  <li><code>dvips + ps2pdfwr</code> での処理の追加</li>
</ul>
<p>をしている.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:auctex-latexmk-setup</span> <span class="p">()</span>
  <span class="s">&quot;Add LatexMk command to TeX-command-list.&quot;</span>
  <span class="p">(</span><span class="nf">delq</span> <span class="p">(</span><span class="nb">assoc </span><span class="s">&quot;LaTeX&quot;</span> <span class="nv">TeX-command-list</span><span class="p">)</span> <span class="nv">TeX-command-list</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;TeX-command-list</span>
               <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;LaTeX&quot;</span> <span class="s">&quot;latexmk -gg -pdfdvi %t&quot;</span> <span class="nv">TeX-run-latexmk</span> <span class="nv">nil</span>
                 <span class="p">(</span><span class="nf">plain-tex-mode</span> <span class="nv">latex-mode</span> <span class="nv">doctex-mode</span><span class="p">)</span> <span class="nv">:help</span> <span class="s">&quot;Run LatexMk, with epLaTeX, dvipdfmx&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;TeX-command-list</span>
               <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;LaTeXMk&quot;</span> <span class="s">&quot;latexmk %t&quot;</span> <span class="nv">TeX-run-latexmk</span> <span class="nv">nil</span>
                 <span class="p">(</span><span class="nf">plain-tex-mode</span> <span class="nv">latex-mode</span> <span class="nv">doctex-mode</span><span class="p">)</span> <span class="nv">:help</span> <span class="s">&quot;Run LatexMk without any options&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;TeX-command-list</span>
               <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;LaTeXMk(ps2pdfwr)&quot;</span> <span class="s">&quot;latexmk -gg -pdfps %t&quot;</span> <span class="nv">TeX-run-latexmk</span> <span class="nv">nil</span>
                 <span class="p">(</span><span class="nf">plain-tex-mode</span> <span class="nv">latex-mode</span> <span class="nv">doctex-mode</span><span class="p">)</span> <span class="nv">:help</span> <span class="s">&quot;Run LatexMk, with (e)pLaTeX, dvips, ps2pdfwr&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">LaTeX-clean-intermediate-suffixes</span>
        <span class="p">(</span><span class="nf">append</span>
         <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.nav&quot;</span> <span class="s">&quot;\\.snm&quot;</span> <span class="s">&quot;\\.fdb_latexmk&quot;</span> <span class="s">&quot;\\.aux.bak&quot;</span> <span class="s">&quot;\\.synctex.gz&quot;</span><span class="p">)</span> <span class="nv">LaTeX-clean-intermediate-suffixes</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">setq</span> <span class="nv">TeX-command-output-list</span>
        <span class="o">&#39;</span><span class="p">((</span><span class="s">&quot;latexmk&quot;</span> <span class="p">(</span><span class="s">&quot;pdf&quot;</span><span class="p">)))))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;LaTeX-mode-hook</span>
          <span class="p">(</span><span class="nf">function</span> <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
                      <span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;auctex-latexmk</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">)</span>
                      <span class="p">(</span><span class="nf">my:auctex-latexmk-setup</span><span class="p">)</span>
                      <span class="c1">;; (add-to-list &#39;auctex-latexmk-encoding-alist</span>
                      <span class="c1">;;              &#39;(iso-2022-jp      . &quot;jis&quot;))</span>
                      <span class="c1">;; (add-to-list &#39;auctex-latexmk-encoding-alist</span>
                      <span class="c1">;;              &#39;(iso-2022-jp-unix . &quot;jis&quot;))</span>
                      <span class="p">)))</span>
</pre></div>
<p><code>~/.latexmkrc</code> の設定は以下の通り</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env perl</span>
<span class="nv">$kanji</span>  <span class="o">=</span> <span class="nb">defined</span> <span class="nv">$ENV</span><span class="p">&#123;</span><span class="s">&quot;LATEXENC&quot;</span><span class="p">}</span> <span class="p">?</span> <span class="s">&quot;-kanji=$ENV&#123;\&quot;LATEXENC\&quot;}&quot;</span> <span class="p">:</span> <span class="s">&quot;-kanjii=utf8&quot;</span> <span class="p">;</span>
<span class="nv">$latex</span>  <span class="o">=</span> <span class="s">&quot;platex -interaction=nonstopmode -src-specials -shell-escape --synctex=1 $kanji&quot;</span><span class="p">;</span>
<span class="nv">$latex_silent</span> <span class="o">=</span> <span class="s">&quot;platex -interaction=batchmode -src-specials -shell-escape --synctex=1 $kanji&quot;</span><span class="p">;</span>
<span class="nv">$bibtex</span> <span class="o">=</span> <span class="s">&quot;pbibtex $kanji&quot;</span><span class="p">;</span>
<span class="nv">$makeindex</span> <span class="o">=</span> <span class="s">&quot;touch -m %D&quot;</span><span class="p">;</span>
<span class="nv">$dvipdf</span> <span class="o">=</span> <span class="s">&quot;dvipdfmx %O -o %D %S&quot;</span><span class="p">;</span>
<span class="nv">$dvips</span> <span class="o">=</span> <span class="s">&#39;dvips %O -z -f %S | convbkmk -u &gt; %D&#39;</span><span class="p">;</span>
<span class="nv">$ps2pdf</span> <span class="o">=</span> <span class="s">&#39;ps2pdfwr %O %S %D&#39;</span><span class="p">;</span>
<span class="nv">$pdf_mode</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nv">$pdf_previewer</span> <span class="o">=</span> <span class="s">&#39;start xdg-open&#39;</span><span class="p">;</span>
<span class="nv">$pdf_update_method</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$clean_ext</span> <span class="o">=</span> <span class="s">&quot;snm nav vrb synctex.gz&quot;</span><span class="p">;</span>
</pre></div>
<h4><a id="日本語用の設定"><span class='anchor'>_</span></a>日本語用の設定</h4>
<h5><a id="japanese-latex-mode 用の細工"><span class='anchor'>_</span></a>japanese-latex-mode 用の細工</h5>
<p><code>japanese-latex-mode</code> において, 幾つかのコマンドが追加/上書きされている.
  あまり使うことの無いコマンドが表示されるのが嫌なので,
  それらを削除したり.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">with-eval-after-load</span> <span class="s">&quot;tex-jp&quot;</span>
  <span class="p">(</span><span class="nf">dolist</span> <span class="p">(</span><span class="nf">command</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;pTeX&quot;</span> <span class="s">&quot;pLaTeX&quot;</span> <span class="s">&quot;pBibTeX&quot;</span> <span class="s">&quot;jTeX&quot;</span> <span class="s">&quot;jLaTeX&quot;</span> <span class="s">&quot;jBibTeX&quot;</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">delq</span> <span class="p">(</span><span class="nb">assoc </span><span class="nv">command</span> <span class="nv">TeX-command-list</span><span class="p">)</span> <span class="nv">TeX-command-list</span><span class="p">)))</span>
</pre></div>
<h5><a id="TeX-engine の設定"><span class='anchor'>_</span></a>TeX-engine の設定</h5>
<p>どのタイミングで使われているのか良くわかっていないのだけれど, 一応設定しておく.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">TeX-engine-alist</span>
      <span class="o">&#39;</span><span class="p">((</span><span class="nf">ptex</span> <span class="s">&quot;pTeX&quot;</span>
              <span class="s">&quot;ptex %(kanji)%`%S%(PDFout)%(mode)% -shell-escape&quot;</span>
              <span class="s">&quot;platex %(kanji)%`%S%(PDFout)%(mode)% -shell-escape&quot;</span>
              <span class="s">&quot;eptex&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">uptex</span> <span class="s">&quot;upTeX&quot;</span>
               <span class="s">&quot;uptex %(kanji)%`%S%(PDFout)%(mode)% -shell-escape&quot;</span>
               <span class="s">&quot;uplatex %(kanji)%`%S%(PDFout)%(mode)% -shell-escape&quot;</span>
               <span class="s">&quot;uptex&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">pdfptex</span> <span class="s">&quot;PDFpLaTeX&quot;</span>
                 <span class="s">&quot;ptex2pdf -e -ot &#39; %(kanji) %S -shell-escape %(mode)&#39;&quot;</span>
                 <span class="s">&quot;ptex2pdf -e -l -ot &#39;%(kanji) %S -shell-escape %(mode)&#39;&quot;</span>
                 <span class="s">&quot;eptex&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">pdfuptex</span> <span class="s">&quot;PDFupLaTeX&quot;</span>
                 <span class="s">&quot;ptex2pdf -e -u -ot &#39;%(kanji) %S -shell-escape %(mode)&#39;&quot;</span>
                 <span class="s">&quot;ptex2pdf -u -l -ot &#39;%(kanji) %S -shell-escape %(mode)&#39;&quot;</span>
                 <span class="s">&quot;euptex&quot;</span><span class="p">)</span>
        <span class="p">))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">TeX-engine</span> <span class="ss">&#39;pdfptex</span><span class="p">)</span>
</pre></div>
<p>ちなみに
  <code>japanese-latex-mode</code> では
  <code>TeX-engine-alist-builtin</code> に <code>ptex, jtex, uptex</code> が追加(<code>setq</code>) されているため
  上記設定は不要(かも).</p>
<h4><a id="zotero との連携"><span class='anchor'>_</span></a>zotero との連携</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">zotelo-translator-charsets</span> <span class="o">&#39;</span><span class="p">((</span><span class="nf">BibTeX</span> <span class="o">.</span> <span class="s">&quot;Unicode&quot;</span><span class="p">)</span>
                                   <span class="p">(</span><span class="nf">Default</span> <span class="o">.</span> <span class="s">&quot;Unicode&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;LaTeX-mode-hook</span> <span class="ss">&#39;zotelo-minor-mode</span><span class="p">)</span>
</pre></div>
<h2><a id="flymake"><span class='anchor'>_</span></a>flymake</h2>
<h3><a id="読み込み"><span class='anchor'>_</span></a>読み込み</h3>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;flymake</span> <span class="nv">nil</span> <span class="ss">&#39;noerror</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">flymake-start-syntax-check-on-find-file</span> <span class="nv">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;find-file-hook</span> <span class="ss">&#39;flymake-find-file-hook</span><span class="p">)</span>
</pre></div>
<h3><a id="Makefile の有無によるコマンドの振り分け"><span class='anchor'>_</span></a>Makefile の有無によるコマンドの振り分け</h3>
<p>元ネタ: <a href="http://moimoitei.blogspot.jp/2010/05/flymake-in-emacs.html">Emacs で文法チェック</a> [fn:1]</p>
<h4><a id="Makefile が無い場合のチェック用関数"><span class='anchor'>_</span></a>Makefile が無い場合のチェック用関数</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:flymake-simple-generic-init</span> <span class="p">(</span><span class="nf">cmd</span> <span class="nv">&amp;optional</span> <span class="nv">opts</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">temp-file</span> <span class="p">(</span><span class="nf">flymake-init-create-temp-buffer-copy</span>
                     <span class="ss">&#39;flymake-create-temp-inplace</span><span class="p">))</span>
         <span class="p">(</span><span class="nf">local-file</span> <span class="p">(</span><span class="nf">file-relative-name</span>
                      <span class="nv">temp-file</span>
                      <span class="p">(</span><span class="nf">file-name-directory</span> <span class="nv">buffer-file-name</span><span class="p">))))</span>
    <span class="p">(</span><span class="nb">list </span><span class="nv">cmd</span> <span class="p">(</span><span class="nb">append </span><span class="nv">opts</span> <span class="p">(</span><span class="nb">list </span><span class="nv">local-file</span><span class="p">)))))</span>
</pre></div>
<h4><a id="Makefile が有る場合のチェック用関数"><span class='anchor'>_</span></a>Makefile が有る場合のチェック用関数</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:flymake-simple-make-or-generic-init</span> <span class="p">(</span><span class="nf">cmd</span> <span class="nv">&amp;optional</span> <span class="nv">opts</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">file-exists-p</span> <span class="s">&quot;Makefile&quot;</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">flymake-simple-make-init</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">my:flymake-simple-generic-init</span> <span class="nv">cmd</span> <span class="nv">opts</span><span class="p">)))</span>
</pre></div>
<h3><a id="C/C++"><span class='anchor'>_</span></a>C/C++</h3>
<h4><a id="Makefile が無い場合の関数定義"><span class='anchor'>_</span></a>Makefile が無い場合の関数定義</h4>
<h5><a id="C"><span class='anchor'>_</span></a>C</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:flymake-c-init</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">my:flymake-simple-make-or-generic-init</span>
   <span class="s">&quot;gcc&quot;</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;-O2&quot;</span> <span class="s">&quot;-Wall&quot;</span> <span class="s">&quot;-Wextra&quot;</span> <span class="s">&quot;-Wformat&quot;</span> <span class="s">&quot;-Werror=format-security&quot;</span> <span class="s">&quot;-fsyntax-only&quot;</span><span class="p">)))</span>
</pre></div>
<h5><a id="C++"><span class='anchor'>_</span></a>C++</h5>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:flymake-cc-init</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">my:flymake-simple-make-or-generic-init</span>
   <span class="s">&quot;g++&quot;</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;-O2&quot;</span> <span class="s">&quot;-Wall&quot;</span> <span class="s">&quot;-Wextra&quot;</span> <span class="s">&quot;-Wformat&quot;</span> <span class="s">&quot;-Werror=format-security&quot;</span> <span class="s">&quot;-fsyntax-only&quot;</span><span class="p">)))</span>
</pre></div>
<h4><a id="関数の追加"><span class='anchor'>_</span></a>関数の追加</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">push</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.[cC]\\&#39;&quot;</span> <span class="nv">my:flymake-c-init</span><span class="p">)</span>
      <span class="nv">flymake-allowed-file-name-masks</span><span class="p">)</span>
<span class="p">(</span><span class="nf">push</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.\\(?:cc\|cpp\|CC\|CPP\\)\\&#39;&quot;</span> <span class="nv">my:flymake-cc-init</span><span class="p">)</span>
      <span class="nv">flymake-allowed-file-name-masks</span><span class="p">)</span>
</pre></div>
<h3><a id="Ruby"><span class='anchor'>_</span></a>Ruby</h3>
<p>@see <a href="http://www.emacswiki.org/emacs/FlymakeRuby">http://www.emacswiki.org/emacs/FlymakeRuby</a> [fn:2]</p>
<h4><a id="関数定義"><span class='anchor'>_</span></a>関数定義</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:flymake-ruby-init</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">my:flymake-simple-generic-init</span>
   <span class="s">&quot;ruby&quot;</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;-c&quot;</span><span class="p">)))</span>
</pre></div>
<h4><a id="関数の追加"><span class='anchor'>_</span></a>関数の追加</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">push</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.\\(?:rb\|erb\\)\\&#39;&quot;</span> <span class="nv">my:flymake-ruby-init</span><span class="p">)</span> <span class="nv">flymake-allowed-file-name-masks</span><span class="p">)</span>
</pre></div>
<h3><a id="Fortran (>=90)&#8221;><span class='anchor'>_</span></a>Fortran (&gt;=90)</h3>
<h4><a id="関数定義"><span class='anchor'>_</span></a>関数定義</h4>
<p>gfortran 用と g95 用で関数を切り替え.
  とはいえ g95 は最近使ってないので良く知らない.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:flymake-gfortran-init</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">my:flymake-simple-make-or-generic-init</span>
   <span class="s">&quot;gfortran&quot;</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;-O2&quot;</span> <span class="s">&quot;-Wall&quot;</span> <span class="s">&quot;-Wextra&quot;</span> <span class="s">&quot;-fsyntax-only&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">defun</span> <span class="nv">my:flymake-g95-init</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">my:flymake-simple-make-or-generic-init</span>
   <span class="s">&quot;g95&quot;</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;-O2&quot;</span> <span class="s">&quot;-Wall&quot;</span> <span class="s">&quot;-Wextra&quot;</span> <span class="s">&quot;-fsyntax-only&quot;</span><span class="p">)))</span>
</pre></div>
<h4><a id="関数の追加"><span class='anchor'>_</span></a>関数の追加</h4>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">cond</span>
 <span class="p">((</span><span class="nf">executable-find</span> <span class="s">&quot;gfortran&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">push</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.\\(?:f90\|F90\|f95\|F95\\)\\&#39;&quot;</span> <span class="nv">my:flymake-gfortran-init</span><span class="p">)</span>
        <span class="nv">flymake-allowed-file-name-masks</span><span class="p">))</span>
 <span class="p">((</span><span class="nf">executable-find</span> <span class="s">&quot;g95&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">push</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.\\(?:f90\|F90\|f95\|F95\\)\\&#39;&quot;</span> <span class="nv">my:flymake-g95-init</span><span class="p">)</span>
        <span class="nv">flymake-allowed-file-name-masks</span><span class="p">))</span>
 <span class="p">(</span><span class="nf">t</span> <span class="nv">nil</span><span class="p">))</span>
</pre></div>
<p>コンパイラとして gfortran を想定しています.
  ただ, gfortran の -fsyntax-only 出力は gcc とはだいぶ異なるので
  以下の様な安直な wrapper を噛ませてチェックすることにしています</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env ruby</span>
<span class="c1"># -*- mode: ruby; coding: utf-8; indent-tabs-mode: nil -*-</span>
<span class="c1">#</span>
<span class="c1"># License: WTFPL</span>
<span class="c1">#</span>
<span class="vi">@hold</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="vi">@fname</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="vi">@line</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="vi">@ch</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="k">while</span> <span class="n">input</span> <span class="o">=</span> <span class="no">ARGF</span><span class="o">.</span><span class="n">gets</span>
  <span class="vi">@input</span> <span class="o">=</span> <span class="n">input</span>
  <span class="k">if</span> <span class="vi">@input</span> <span class="o">=~</span> <span class="sr">/^ /</span> <span class="o">||</span> <span class="vi">@input</span> <span class="o">=~</span><span class="sr">/^\s*$/</span> <span class="o">||</span> <span class="vi">@input</span> <span class="o">=~</span><span class="sr">/^\s*1\s*$/</span>
    <span class="vi">@hold</span> <span class="o">=</span> <span class="vi">@input</span>
  <span class="k">elsif</span> <span class="vi">@input</span> <span class="o">=~</span> <span class="sr">/^(Warning|Error):/</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="vi">@fname</span> <span class="o">&amp;&amp;</span> <span class="vi">@line</span> <span class="o">&amp;&amp;</span> <span class="vi">@ch</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#&#123;</span><span class="vi">@fname</span><span class="si">}</span><span class="s2">:</span><span class="si">#&#123;</span><span class="vi">@line</span><span class="si">}</span><span class="s2">: </span><span class="si">#&#123;</span><span class="vi">@input</span><span class="o">.</span><span class="n">chomp</span><span class="si">}</span><span class="s2"> (ch.</span><span class="si">#&#123;</span><span class="vi">@ch</span><span class="si">}</span><span class="s2">)&quot;</span>
  <span class="k">elsif</span> <span class="vi">@input</span> <span class="o">=~</span> <span class="sr">/^(.+?):(\d+?)\.(\d+):(\s*)/</span>
    <span class="vi">@fname</span><span class="p">,</span><span class="vi">@line</span><span class="p">,</span><span class="vi">@ch</span> <span class="o">=</span> <span class="vg">$1</span><span class="p">,</span> <span class="vg">$2</span><span class="p">,</span> <span class="vg">$3</span>
    <span class="vi">@hold</span> <span class="o">=</span> <span class="vi">@input</span>
  <span class="k">else</span>
    <span class="vi">@hold</span> <span class="o">=</span> <span class="vi">@input</span>
    <span class="nb">puts</span> <span class="vi">@hold</span>
    <span class="vi">@hold</span> <span class="o">=</span> <span class="kp">nil</span>
    <span class="vi">@fname</span> <span class="o">=</span> <span class="kp">nil</span>
    <span class="vi">@line</span> <span class="o">=</span> <span class="kp">nil</span>
    <span class="vi">@ch</span> <span class="o">=</span> <span class="kp">nil</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
<h2><a id="フォントと色"><span class='anchor'>_</span></a>フォントと色</h2>
<p>テーマにした方が良い</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my:load-window-config</span> <span class="p">()</span>
  <span class="s">&quot;load window-system specific settings&quot;</span>
  <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">when</span> <span class="nv">window-system</span>
    <span class="p">(</span><span class="nf">progn</span>
      <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;default-frame-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">font</span> <span class="o">.</span> <span class="s">&quot;Monospace-12&quot;</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">set-background-color</span> <span class="s">&quot;#242424&quot;</span><span class="p">)</span>
      <span class="c1">;; (set-cursor-color &quot;#4CFF4C&quot;)</span>
      <span class="p">(</span><span class="nf">set-face-attribute</span> <span class="ss">&#39;default</span> <span class="nv">t</span> <span class="nv">:font</span> <span class="s">&quot;Monospace&quot;</span> <span class="nv">:height</span> <span class="mi">135</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">set-frame-font</span> <span class="s">&quot;Monospace-13.5&quot;</span> <span class="nv">nil</span> <span class="nv">t</span><span class="p">)</span>
      <span class="c1">;; (add-to-list &#39;default-frame-alist &#39;(alpha 90 50))</span>
      <span class="c1">;; (set-frame-parameter (selected-frame) &#39;alpha &#39;(90 50))</span>
      <span class="c1">;; (set-face-attribute &#39;default nil</span>
      <span class="c1">;;                     :family &quot;Ricty Discord&quot;</span>
      <span class="c1">;;                     :height 150)</span>
      <span class="c1">;; (set-fontset-font (frame-parameter nil &#39;font)</span>
      <span class="c1">;;                   &#39;japanese-jisx0208</span>
      <span class="c1">;;                   (cons &quot;Ricty Discord&quot; &quot;iso10646-1&quot;))</span>
      <span class="c1">;; (set-fontset-font (frame-parameter nil &#39;font)</span>
      <span class="c1">;;                   &#39;japanese-jisx0212</span>
      <span class="c1">;;                   (cons &quot;Ricty Discord&quot; &quot;iso10646-1&quot;))</span>
      <span class="c1">;; (set-fontset-font (frame-parameter nil &#39;font)</span>
      <span class="c1">;;                   &#39;katakana-jisx0201</span>
      <span class="c1">;;                   (cons &quot;Ricty Discord&quot; &quot;iso10646-1&quot;))</span>
      <span class="c1">;; (set-fontset-font t &#39;symbol</span>
      <span class="c1">;;                   (font-spec :family &quot;Symbola&quot;) nil &#39;prepend)</span>
      <span class="c1">;; (set-frame-parameter (selected-frame) &#39;alpha &#39;(90 50))</span>
      <span class="c1">;; (add-to-list &#39;default-frame-alist &#39;(font . &quot;SeptemberMMono-13.5&quot;))</span>
      <span class="p">)))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">frame-background-mode</span> <span class="p">(</span><span class="nf">frame-parameter</span> <span class="nv">nil</span> <span class="ss">&#39;background-mode</span><span class="p">))</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">default-frame-alist</span>
      <span class="o">&#39;</span><span class="p">(</span>
        <span class="p">(</span><span class="nf">foreground-color</span> <span class="o">.</span> <span class="s">&quot;#F6F3E8&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">scroll-bar-foreground-color</span> <span class="o">.</span> <span class="s">&quot;red&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">vertical-scroll-bars</span> <span class="o">.</span> <span class="nv">right</span><span class="p">)</span>
        <span class="p">))</span>
<span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nf">window-system</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:load-window-config</span><span class="p">))</span>
</pre></div>
<p>テスト</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">custom-set-faces</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">default</span>                             <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#F6F3E8&quot;</span> <span class="p">))))</span>
 <span class="c1">;;</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">cursor</span>                              <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#4CFF4C&quot;</span> <span class="nv">:background</span> <span class="s">&quot;#4CFF4C&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-builtin-face</span>              <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7FBFFF&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-comment-delimiter-face</span>    <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#e5e5e6&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-comment-face</span>              <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#e5e5e6&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-constant-face</span>             <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#FFBF7F&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-doc-face</span>                  <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7FFF7F&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-doc-string-face</span>           <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7FFF7F&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-function-name-face</span>        <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#BF7FFF&quot;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-keyword-face</span>              <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#FF7F7F&quot;</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-link-face</span>                 <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7FFFFF&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-negation-char-face</span>        <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7FFFFF&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span>   <span class="nv">:italic</span> <span class="nv">nil</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-preprocessor-face</span>         <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#FF4C4C&quot;</span> <span class="nv">:bold</span> <span class="nv">nil</span> <span class="nv">:italic</span> <span class="nv">nil</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-regexp-grouping-backslash</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#A5EE4C&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span>   <span class="nv">:italic</span> <span class="nv">nil</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-regexp-grouping-construct</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7F7FFF&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span>   <span class="nv">:italic</span> <span class="nv">nil</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-string-face</span>               <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7FFF7F&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-type-face</span>                 <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#FFFF7F&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-variable-name-face</span>        <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7F7FFF&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">font-lock-warning-face</span>              <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#FF7FBF&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">fringe</span>                              <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#666666&quot;</span> <span class="nv">:background</span> <span class="s">&quot;#282828&quot;</span> <span class="p">))))</span>
 <span class="c1">;; &#39;(hl-line                             ((t (:background &quot;#556b2f&quot; ))))</span>
 <span class="c1">;; &#39;(highlight                           ((t (:background &quot;#556b2f&quot; ))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">hl-line</span>                             <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:background</span> <span class="s">&quot;#4C4C4C&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">highlight</span>                           <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:background</span> <span class="s">&quot;#4C4C4C&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">minibuffer-prompt</span>                   <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#BF7FFF&quot;</span> <span class="p">))))</span>
 <span class="c1">;; &#39;(mode-line                           ((t (:foreground &quot;#242424&quot; :background &quot;#5FAFD7&quot; :bold nil ))))</span>
 <span class="c1">;; &#39;(mode-line                           ((t (:foreground &quot;#F6F3E8&quot; :background &quot;#222244&quot; ))))</span>
 <span class="c1">;; &#39;(mode-line-inactive                  ((t (:foreground &quot;#666666&quot; :background &quot;#BDBDBD&quot; :bold nil ))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">region</span>                              <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:background</span> <span class="s">&quot;#222244&quot;</span> <span class="p">))))</span>
 <span class="c1">;; custom-set-faces was added by Custom.</span>
 <span class="c1">;; If you edit it by hand, you could mess it up, so be careful.</span>
 <span class="c1">;; Your init file should contain only one such instance.</span>
 <span class="c1">;; If there is more than one, they won&#39;t work right.</span>
 <span class="c1">;; &#39;(fixed-pitch ((t (:family &quot;Ricty&quot; ))))</span>
 <span class="c1">;; &#39;(variable-pitch ((t (:family &quot;Ricty&quot; ))))</span>
 <span class="c1">;; &#39;(fixed-pitch ((t (:family &quot;Monospace&quot; :height 135 ))))</span>
 <span class="c1">;; &#39;(variable-pitch ((t (:family &quot;Monospace&quot; :height 135 ))))</span>
 <span class="c1">;; dired</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">dired-directory</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:bold</span> <span class="nv">t</span> <span class="nv">:foreground</span> <span class="s">&quot;#7F7FFF&quot;</span> <span class="p">))))</span>
 <span class="c1">;; &#39;(dired-flagged</span>
 <span class="c1">;; &#39;(dired-header</span>
 <span class="c1">;; &#39;(dired-ignored</span>
 <span class="c1">;; &#39;(dired-mark</span>
 <span class="c1">;; &#39;(dired-marked</span>
 <span class="c1">;; &#39;(dired-perm-write</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">dired-symlink</span>   <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:bold</span> <span class="nv">t</span> <span class="nv">:foreground</span> <span class="s">&quot;#7FFFFF&quot;</span> <span class="p">))))</span>
 <span class="c1">;; &#39;(dired-warning</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">flx-highlight-face</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:bold</span> <span class="nv">t</span> <span class="nv">:foreground</span> <span class="s">&quot;#FFBF7F&quot;</span> <span class="p">))))</span>
 <span class="c1">;; helm: header-line</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-source-header</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#F6F3E8&quot;</span> <span class="nv">:background</span> <span class="s">&quot;#224488&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-visible-mark</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">highlight</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-selection</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">highlight</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-selection-line</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">highlight</span> <span class="p">))))</span>
 <span class="c1">;; helm: directory</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-ff-directory</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">default</span> <span class="nv">:foreground</span> <span class="s">&quot;#7FBFFF&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-ff-directory</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">default</span> <span class="nv">:foreground</span> <span class="s">&quot;#7F7FFF&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-bookmark-directory</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">helm-ff-directory</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-buffer-directory</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">helm-ff-directory</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-ff-dotted-directory</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">helm-ff-directory</span> <span class="p">))))</span>
 <span class="c1">;; helm: file</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-ff-file</span>   <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">default</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-bookmark-file</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">helm-ff-file</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-buffer-file</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">helm-ff-file</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-grep-file</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">helm-ff-file</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-etags-file</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">helm-ff-file</span> <span class="p">))))</span>
 <span class="c1">;; helm: file + executable</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-ff-executable</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">helm-ff-file</span> <span class="nv">:foreground</span> <span class="s">&quot;#7FFF7F&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">))))</span>
 <span class="c1">;; helm: symlink</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-ff-symlink</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">default</span> <span class="nv">:foreground</span> <span class="s">&quot;#7FFFFF&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-ff-dotted-symlink-directory</span>  <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">helm-ff-symlink</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">helm-ff-invalid-symlink</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">default</span> <span class="nv">:foreground</span> <span class="s">&quot;#FF7F7F&quot;</span> <span class="p">))))</span>
 <span class="c1">;; Ivy</span>
 <span class="c1">;; &#39;(ivy-confirm-face ((t (:inherit minibuffer-prompt))))</span>
 <span class="c1">;; &#39;(ivy-current-match ((t (:inherit minibuffer-prompt))))</span>
 <span class="c1">;; &#39;(ivy-match-required-face ((t (:inherit minibuffer-prompt))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">howm-mode-keyword-face</span>            <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7F7FFF&quot;</span> <span class="nv">:background</span> <span class="nv">nil</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">howm-mode-title-face</span>              <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#4CFFFF&quot;</span> <span class="nv">:background</span> <span class="nv">nil</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">howm-reminder-deadline-face</span>       <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:bold</span> <span class="nv">t</span> <span class="nv">:foreground</span> <span class="s">&quot;#FF4C4C&quot;</span> <span class="nv">:background</span> <span class="nv">nil</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">howm-reminder-late-deadline-face</span>  <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:bold</span> <span class="nv">t</span> <span class="nv">:underline</span> <span class="nv">t</span> <span class="nv">:foreground</span> <span class="s">&quot;#FF0000&quot;</span> <span class="nv">:background</span> <span class="nv">nil</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">howm-reminder-today-face</span>          <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:bold</span> <span class="nv">t</span> <span class="nv">:foreground</span> <span class="s">&quot;#FFBF7F&quot;</span> <span class="nv">:background</span> <span class="nv">nil</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">howm-reminder-tomorrow-face</span>       <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:bold</span> <span class="nv">t</span> <span class="nv">:foreground</span> <span class="s">&quot;#FF7FBF&quot;</span> <span class="nv">:background</span> <span class="nv">nil</span> <span class="p">))))</span>
 <span class="c1">;; ido</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">ido-first-match</span>     <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">default</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">ido-only-match</span>      <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#FFFF4C&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">ido-subdir</span>          <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#7F7FFF&quot;</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">ido-grid-mode-match</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">ido-first-match</span> <span class="p">))))</span>
 <span class="c1">;; ido-grid-mode-common-match</span>
 <span class="c1">;; ido-grid-mode-jump-face</span>
 <span class="c1">;; ido-incomplete-regexp</span>
 <span class="c1">;; ido-indicator</span>
 <span class="c1">;; ido-virtual</span>
 <span class="c1">;; outline</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">outline-1</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">font-lock-function-name-face</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">outline-2</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">font-lock-string-face</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">outline-3</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">font-lock-keyword-face</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">outline-4</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">font-lock-type-face</span> <span class="nv">:bold</span> <span class="nv">t</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">outline-5</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">font-lock-constant-face</span> <span class="nv">:bold</span> <span class="nv">t</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">outline-6</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">font-lock-variable-name-face</span> <span class="nv">:bold</span> <span class="nv">t</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">outline-7</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">font-lock-builtin-face</span> <span class="nv">:bold</span> <span class="nv">t</span> <span class="p">))))</span>
 <span class="c1">;; &#39;(outline-8 ((t (:inherit font-lock-comment-face :bold t ))))</span>
 <span class="c1">;;</span>
 <span class="c1">;; org</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-agenda-date-today</span>     <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">bold</span> <span class="nv">t</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-agenda-date</span>           <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#FFFFFF&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-agenda-date-weekend</span>   <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#FF7F7F&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-agenda-calendar-event</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#F6F3E8&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-hide</span>                  <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#4C4C4C&quot;</span> <span class="p">))))</span>
 <span class="c1">;; review</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">review-mode-header1-face</span>  <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">outline-1</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">review-mode-header2-face</span>  <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">outline-2</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">review-mode-header3-face</span>  <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">outline-3</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">review-mode-header4-face</span>  <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">outline-4</span><span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">review-mode-header5-face</span>  <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:inherit</span> <span class="nv">outline-5</span><span class="p">))))</span>
 <span class="c1">;; powerline</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">powerline-active1</span>         <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#242424&quot;</span> <span class="nv">:background</span> <span class="s">&quot;#AFD7FF&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">powerline-active2</span>         <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">:foreground</span> <span class="s">&quot;#F6F3E8&quot;</span> <span class="nv">:background</span> <span class="s">&quot;#666666&quot;</span> <span class="p">))))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">powerline-inactive1</span>       <span class="p">((</span><span class="nf">t</span> <span class="nv">:inherit</span> <span class="nv">mode-line-inactive</span> <span class="p">)))</span>
 <span class="o">&#39;</span><span class="p">(</span><span class="nv">powerline-inactive2</span>       <span class="p">((</span><span class="nf">t</span> <span class="nv">:inherit</span> <span class="nv">mode-line-inactive</span> <span class="p">)))</span>
 <span class="p">)</span>
</pre></div>
<h2><a id="=diminish=: モードラインの短縮表示"><span class='anchor'>_</span></a><code>diminish</code>: モードラインの短縮表示</h2>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">use-package</span> <span class="nv">diminish</span>
  <span class="nv">:init</span>
  <span class="p">(</span><span class="nf">defmacro</span> <span class="nv">my:diminish</span> <span class="p">(</span><span class="nf">file</span> <span class="nv">mode</span> <span class="nv">&amp;optional</span> <span class="nv">new-name</span><span class="p">)</span>
    <span class="s">&quot;original: https://github.com/larstvei/dot-emacs/blob/master/init.org&quot;</span>
    <span class="o">`</span><span class="p">(</span><span class="nf">with-eval-after-load</span> <span class="o">,</span><span class="nv">file</span>
       <span class="p">(</span><span class="nf">diminish</span> <span class="o">,</span><span class="nv">mode</span> <span class="o">,</span><span class="nv">new-name</span><span class="p">)))</span>
  <span class="nv">:config</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;abbrev&quot;</span>           <span class="ss">&#39;abbrev-mode</span><span class="p">)</span>
  <span class="c1">;; (my:diminish &quot;auto-complete&quot;    &#39;auto-complete-mode)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;eldoc&quot;</span>            <span class="ss">&#39;eldoc-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;flycheck&quot;</span>         <span class="ss">&#39;flycheck-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;flymake&quot;</span>          <span class="ss">&#39;flymake-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;flyspell&quot;</span>         <span class="ss">&#39;flyspell-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;howm&quot;</span>             <span class="ss">&#39;howm-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;isearch&quot;</span>          <span class="ss">&#39;isearch-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;paredit&quot;</span>          <span class="ss">&#39;paredit-mode</span><span class="p">)</span>
  <span class="c1">;; (my:diminish &quot;projectile&quot;       &#39;projectile-mode)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;rainbow-mode&quot;</span>     <span class="ss">&#39;rainbow-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;ruby-block&quot;</span>       <span class="ss">&#39;ruby-block-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;whitespace&quot;</span>       <span class="ss">&#39;global-whitespace-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;yasnippet&quot;</span>        <span class="ss">&#39;yas-minor-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;helm-multi-match&quot;</span> <span class="ss">&#39;helm-migemo-mode</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">my:diminish</span> <span class="s">&quot;helm-gtags&quot;</span>       <span class="ss">&#39;helm-gtags-mode</span><span class="p">))</span>
</pre></div>
<p>メジャーモードは <code>hook</code> で設定.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;emacs-lisp-mode-hook</span> <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">setq</span> <span class="nv">mode-name</span> <span class="s">&quot;El&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;lisp-interaction-mode-hook</span> <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">setq</span> <span class="nv">mode-name</span> <span class="s">&quot;Li&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;wl-folder-mode-hook</span>  <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">setq</span> <span class="nv">mode-name</span> <span class="s">&quot;&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;wl-summary-mode-hook</span> <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">setq</span> <span class="nv">mode-name</span> <span class="s">&quot;&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;wl-draft-mode-hook</span>   <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">setq</span> <span class="nv">mode-name</span> <span class="s">&quot;&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;mime-view-mode-hook</span>  <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">setq</span> <span class="nv">mode-name</span> <span class="s">&quot;&quot;</span><span class="p">)))</span>
</pre></div>


      </div> <!-- /.col-xs-12 -->
    </div> <!-- /.row -->
  </div> <!-- /.content -->
</div> <!-- /.container -->
<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
      <p>
        
        &copy; 2006 - 2016
        <a href="mailto:uwabami@gfd-dennou.org">Youhei SASAKI</a>,
        Lastupdate: 2016-12-22 01:37:52 +0900
        <br />
        <span class="generator"> Powered by
          <a href="http://orgmode.org/" target="_blank" title="Org-mode">Org-mode</a>
          +
          <a href="http://jekyllrb.com/" target="_blank" title="Jekyll" >Jekyll</a>
          +
          <a href="http://nkmr6194.github.io/Umi/" target="_blank">Umi</a> &amp;
          <a href="http://getbootstrap.com/" target="_blank">Bootstrap</a>
        </span>
      </p>

      </div> <!-- /.col-sm-12 -->
    </div> <!-- /.row -->
  </div> <!-- /.container -->
</footer>
    <script src="/js/jquery-1.9.1.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
