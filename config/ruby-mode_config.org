# -*- mode: org; coding: utf-8-unix; indent-tabs-mode: nil -*-
#
# Copyright(C) Youhei SASAKI All rights reserved.
# $Lastupdate: 2012/04/19 18:06:12$
# License: Expat
#
#+TITLE: ruby-mode の設定
#+AUTHOR: Youhei SASAKI
#+EMAIL: uwabami@gfd-dennou.org
* 始めに
  Ruby 愛しているよ Ruby.
  あと [[http://rabbit-shockers.org/][Rabbit]] の設定もしておく.
* 基本設定
** auto-mode-alist の設定
  ruby-mode は Emacs23 以降は本体に同梱されているので
  autoload を設定するだけで良い.
  Rakefile は ruby-mode にならないので, auto-mode-alist に追加しておく.
  #+BEGIN_SRC emacs-lisp
    (eval-when-compile
      (require 'ruby-mode))
    (autoload 'ruby-mode "ruby-mode"
      "Major mode for ruby files" t)
    (add-to-list 'auto-mode-alist
                 '("\\.rb$" . ruby-mode))
    (add-to-list 'auto-mode-alist
                 '("Rakefile$" . ruby-mode))
    (add-to-list 'interpreter-mode-alist
                 '("ruby" . ruby-mode))
  #+END_SRC
* ruby-electric
  対応する括弧や end を補完してくれる.
  これは ruby のソースの SVN HEAD から.
  #+BEGIN_SRC emacs-lisp
    (require 'ruby-electric)
    (add-hook 'ruby-mode-hook
              '(lambda ()
                 (ruby-electric-mode t)))
  #+END_SRC
* ruby-block
  対応する end をハイライトしてくれる
** 導入
  #+BEGIN_SRC emacs-lisp
    (unless (locate-library "ruby-block")
      (auto-install-from-url "http://www.emacswiki.org/emacs/download/ruby-block.el"))
  #+END_SRC
** 設定
   #+BEGIN_SRC emacs-lisp
     (require 'ruby-block)
     (setq ruby-block-mode-highlight-toggle t)
     (defun ruby-mode-hook-ruby-block ()
       (ruby-block-mode t))
     (add-hook 'ruby-mode-hook 'ruby-mode-hook-ruby-block)
   #+END_SRC
* rd-mode
** 導入
   #+BEGIN_SRC emacs-lisp
     (unless (locate-library "rd-mode")
       (auto-install-from-url "https://raw.github.com/uwabami/rdtool/master/utils/rd-mode.el"))
   #+END_SRC
** 設定
   #+BEGIN_SRC emacs-lisp
     (eval-when-compile
       (require 'rd-mode))
     (autoload 'rd-mode "rd-mode" "major mode for ruby document formatter RD" t)
     ;; rd-mode が起動した際に, =end \n\n =begin を省略しない.
     (add-hook 'rd-mode-hook 'rd-show-other-block-all)
     (add-to-list 'auto-mode-alist
                  '("\\.rd$" . rd-mode))
   #+END_SRC
* rabbit-mode
** 導入
   #+BEGIN_SRC emacs-lisp
     (unless (locate-library "rabbit-mode")
       (auto-install-from-url "https://raw.github.com/shockers/rabbit/master/misc/emacs/rabbit-mode.el"))
   #+END_SRC
** 設定
   #+BEGIN_SRC emacs-lisp
     (eval-when-compile
       (require 'rabbit-mode))
     (autoload 'rabbit-mode "rabbit-mode" "major mode for Rabbit" t)
     (add-to-list 'auto-mode-alist
                  '("\\.\\(rbt\\|rab\\)$" . rabbit-mode))
  #+END_SRC
