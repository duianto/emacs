# -*- mode: org; coding: utf-8-unix; indent-tabs-mode: nil -*-
#
# Copyright(C) Youhei SASAKI All rights reserved.
# $Lastupdate: 2013/01/28 03:28:00$
# License: Expat
#
#+AUTHOR: Youhei SASAKI
#+EMAIL:  uwabami@gfd-dennou.org
#+TITLE: calfw: カレンダーの設定
#+SETUPFILE: ./export-config.org
#+BEGIN_HTML
---
layout: emacs
title: calfw: カレンダーの設定
---
#+END_HTML
* 始めに
  最近は予定の管理は google カレンダー一本です.
  携帯で閲覧/追加できるのも良い感じです.
  ですが Emacs からも予定の閲覧や管理がしたくなります. ここではその設定とか.
* 日本の休日の追加
  el-get 用のレシピも書いておきました.
  #+BEGIN_SRC emacs-lisp
    (unless (locate-library "japanese-holidays")
      (el-get 'sync 'japanese-holidays))
    (require 'japanese-holidays nil 'noerror)
    (setq calendar-holidays
          (append japanese-holidays holiday-local-holidays holiday-other-holidays))
  #+END_SRC
* calfw の導入と設定
  [[https://github.com/kiwanami/emacs-calfw][calfw]] はkiwanami 大先生による素敵elisp.
  Debian にはパッケージがあります. 無い場合は el-get
  #+BEGIN_SRC emacs-lisp
    (unless (my:dpkg-status 'emacs-calfw-howm)
      (el-get 'sync '(calfw)))
  #+END_SRC
* google calendar/howm との連携
  #+BEGIN_SRC emacs-lisp
    (require 'calfw-org nil 'noerror)
    (eval-after-load "howm-menu"
      '(progn
         (require 'calfw-howm nil 'noerror)
         (require 'calfw-ical nil 'noerror)
         (cfw:install-howm-schedules)
         (define-key howm-mode-map (kbd "M-C") 'cfw:elscreen-open-howm-calendar)
         (setq cfw:howm-schedule-contents
               (list
                (cfw:ical-create-source "KUSM" "~/Dropbox/ical/KUSM.ics" "#7FFF7F")
                (cfw:ical-create-source "My" "~/Dropbox/ical/MyCalendar.ics" "#FFFF7F")
                (cfw:ical-create-source "GFD" "~/Dropbox/ical/GFD.ics" "#FF7F7F")
                (cfw:ical-create-source "DebianJP" "~/Dropbox/ical/DebianJP.ics" "#7FFFFF")
                (cfw:ical-create-source "Org" "~/Dropbox/ical/org-export.ics" "#FF7FFF")
                ))
         ))
   #+END_SRC
* Footnotes
  - Japanese holidays: [[http://www.meadowy.org/meadow/netinstall/browser/branches/3.00/pkginfo/japanese-holidays/japanese-holidays.el?rev%3D799][http://www.meadowy.org/meadow/netinstall/browser/branches/3.00/pkginfo/japanese-holidays/japanese-holidays.el?rev=799]]
  - Calfw: A Calendar framework for Emacs: [[https://github.com/kiwanami/emacs-calfw]]
